webpackJsonp([27],{ATM7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("vMJZ"),n=i("UK/b"),s={data:function(){var t=this;return{imageUrl:{identity_front:"",identity_back:"",identity_hold:""},validCode:!0,validTip:this.$t("verifyCode.title"),countryAndCardType:{country:[],cardType:[]},ruleForm:{cityname:"",truename:"",cardtype:"",idcard:"",phone:"",sms_verify:"",identity_front:"",identity_back:"",identity_hold:""},link_userInfo:null,rules:{truename:[{required:!0,message:this.$t("centification.message1"),trigger:"blur"}],cardtype:[{required:!0,message:this.$t("centification.message2"),trigger:"change"}],idcard:[{required:!0,message:this.$t("centification.message3"),trigger:"blur"},{validator:function(e,i,a){for(var n=0;n<t.countryAndCardType.cardType.length;n++);a()},trigger:"blur"}],sms_verify:[{required:!0,message:this.$t("centification.message4"),trigger:"blur"}],cityname:[{required:!0,message:this.$t("centification.message5"),trigger:"change"}]},type:null,check_status:null,info:{}}},created:function(){this.getPhoneNum(),this.isCentification()},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){return!!t&&(""===e.ruleForm.identity_front||""===e.ruleForm.identity_back||""===e.ruleForm.identity_hold?(e.$message.error(e.$t("centification.message6")),!1):void Object(a.w)(e.ruleForm).then(function(t){if(1e3!==t.status)return e.$message.error(t.msg),!1;e.isCentification()}).catch(function(){}))})},isCentification:function(){var t=this;Object(a.p)().then(function(e){if(1e3!==e.status)return t.$message.error(e.msg),!1;t.type=e.data.type,t.check_status=e.data.info.check_status,t.info=e.data.info}).catch(function(){})},handleRecentify:function(){var t=this;this.$alert(this.info.check_msg||"--",this.$t("centification.reasonTitle"),{confirmButtonText:this.$t("centification.recentify"),center:!0}).then(function(){Object(a.o)().then(function(e){if(1e3!==e.status)return t.$message.error(e.msg),!1;t.isCentification()}).catch(function(){})}).catch(function(){})},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error(this.$t("centification.message7")),e},handleRemove:function(t,e){},handleChange:function(t,e,i){var a=new FileReader;a.readAsDataURL(t.raw);var n=this;a.onload=function(){n.ruleForm[i]=a.result},this.imageUrl[i]=URL.createObjectURL(t.raw)},setTime:function(){var t=60;if(this.validCode){this.validCode=!1;var e=this,i=setInterval(function(){t--,e.validTip=t+e.$t("verifyCode.second"),0===t&&(clearInterval(i),e.validTip=e.$t("verifyCode.getAgain"),e.validCode=!0)},1e3);return i}},sendRequestSms:function(t){var e=this,i={};this.setTime(),i.user_account=this.link_userInfo.phone,i.request_type="identity",Object(n.d)(i).then(function(t){if(1e3!==t.status)return e.$message.error(t.msg),!1}).catch(function(){})},getPhoneNum:function(){var t=this;this.link_userInfo=window.localStorage.getItem("link_userInfo"),this.link_userInfo=JSON.parse(this.link_userInfo),this.link_userInfo.phone&&"0"!==this.link_userInfo.phone?(this.ruleForm.phone=this.link_userInfo.phone,this.getCountryAndCardTypeList()):this.$confirm(this.$t("errorTips.bindPhoneFist"),this.$t("dialog.title"),{confirmButtonText:this.$t("dialog.sure"),cancelButtonText:this.$t("dialog.cancle"),type:"warning"}).then(function(){t.$router.push("account")}).catch(function(){})},getCountryAndCardTypeList:function(){var t=this;Object(a.i)().then(function(e){if(1e3!==e.status)return t.$message.error(e.msg),!1;t.countryAndCardType.country=e.data.country,t.countryAndCardType.cardType=e.data.cardtype}).catch(function(){})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"centification container"},[i("router-link",{staticClass:"back",attrs:{to:"/user/account"}},[t._v(t._s("< "+t.$t("navbar.user.navItem1")))]),t._v(" "),i("div",{staticClass:"content-title"},[t._v("\n      "+t._s(t.$t("centification.title"))+"\n    ")]),t._v(" "),0==t.type?i("el-form",{ref:"ruleForm",staticClass:"centification-form",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"180px"}},[i("el-form-item",{attrs:{label:t.$t("centification.nation"),prop:"cityname"}},[i("el-select",{attrs:{placeholder:t.$t("centification.nationPlaceholder")},model:{value:t.ruleForm.cityname,callback:function(e){t.$set(t.ruleForm,"cityname","string"==typeof e?e.trim():e)},expression:"ruleForm.cityname"}},t._l(t.countryAndCardType.country,function(t){return i("el-option",{key:t.id,attrs:{label:t.country_name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("centification.certificate"),prop:"cardtype"}},[i("el-select",{attrs:{placeholder:t.$t("centification.certificatePlaceholder")},model:{value:t.ruleForm.cardtype,callback:function(e){t.$set(t.ruleForm,"cardtype","string"==typeof e?e.trim():e)},expression:"ruleForm.cardtype"}},t._l(t.countryAndCardType.cardType,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("centification.name"),prop:"truename"}},[i("el-input",{model:{value:t.ruleForm.truename,callback:function(e){t.$set(t.ruleForm,"truename","string"==typeof e?e.trim():e)},expression:"ruleForm.truename"}}),t._v(" "),i("div",{staticClass:"tips-right"},[t._v(t._s(t.$t("centification.nametips")))])],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("centification.certificateNumber"),prop:"idcard"}},[i("el-input",{model:{value:t.ruleForm.idcard,callback:function(e){t.$set(t.ruleForm,"idcard","string"==typeof e?e.trim():e)},expression:"ruleForm.idcard"}}),t._v(" "),i("div",{staticClass:"tips-right"},[t._v(t._s(t.$t("centification.certificateNumberPlaceholder")))])],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("centification.certificatePhoto"),prop:"file"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("div",{staticClass:"grid-content bg-purple-light"},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","on-remove":t.handleRemove,"on-change":function(e,i){return t.handleChange(e,i,"identity_front")},"show-file-list":!1,"auto-upload":!1,"before-upload":t.beforeAvatarUpload}},[t.imageUrl.identity_front?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl.identity_front}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[i("div",{staticClass:"tip"},[t._v(t._s(t.$t("centification.certificatePhotoTips1")))])])])],1)]),t._v(" "),i("el-col",{attrs:{span:8}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-upload",{staticClass:"avatar-uploader",attrs:{"on-remove":t.handleRemove,action:"","on-change":function(e,i){return t.handleChange(e,i,"identity_back")},"show-file-list":!1,"auto-upload":!1,"before-upload":t.beforeAvatarUpload}},[t.imageUrl.identity_back?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl.identity_back}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[i("div",{staticClass:"tip"},[t._v(t._s(t.$t("centification.certificatePhotoTips2")))])])])],1)]),t._v(" "),i("el-col",{attrs:{span:8}},[i("div",{staticClass:"grid-content bg-purple-light"},[i("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{"on-remove":t.handleRemove,action:"","on-change":function(e,i){return t.handleChange(e,i,"identity_hold")},"show-file-list":!1,"auto-upload":!1,"before-upload":t.beforeAvatarUpload}},[t.imageUrl.identity_hold?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl.identity_hold}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[i("div",{staticClass:"tip"},[t._v(t._s(t.$t("centification.certificatePhotoTips3")))])])])],1)])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("form.phone"),prop:"phone"}},[i("el-input",{attrs:{disabled:""},model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone","string"==typeof e?e.trim():e)},expression:"ruleForm.phone"}})],1),t._v(" "),i("el-form-item",{staticClass:"verify",attrs:{label:t.$t("form.phoneVerifyCode"),prop:"sms_verify"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:t.$t("form.verifyCodePlaceholder")},model:{value:t.ruleForm.sms_verify,callback:function(e){t.$set(t.ruleForm,"sms_verify","string"==typeof e?e.trim():e)},expression:"ruleForm.sms_verify"}}),i("el-button",{staticClass:"get-verify",attrs:{disabled:!t.validCode},nativeOn:{click:function(e){t.sendRequestSms(e)}}},[t._v(t._s(t.validTip))])],1),t._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-button",{staticClass:"sure-submit",attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v(t._s(t.$t("form.submit")))])],1)],1):t._e(),t._v(" "),0==t.type?i("div",{staticClass:"tips"},[i("p",[t._v(t._s(t.$t("centification.tips")))]),t._v(" "),i("p",[t._v(t._s(t.$t("centification.tips1")))]),t._v(" "),i("p",[t._v(t._s(t.$t("centification.tips2")))]),t._v(" "),i("p",[t._v(t._s(t.$t("centification.tips3")))]),t._v(" "),i("p",[t._v(t._s(t.$t("centification.tips4")))])]):t._e(),t._v(" "),1==t.type?i("div",{staticClass:"centification-audit centification-status"},[i("div",{staticClass:"status"},[1==t.check_status?i("div",{staticClass:"clearfix status-title"},[i("img",{attrs:{src:"static/images/user/success.png",alt:""}}),t._v(" "),i("p",[t._v(t._s(t.$t("centification.centificationStatus1")))])]):t._e(),t._v(" "),0==t.check_status?i("div",{staticClass:"clearfix status-title"},[i("img",{attrs:{src:"static/images/user/error.png",alt:""}}),t._v(" "),i("p",[t._v(t._s(t.$t("centification.centificationStatus2")))])]):t._e(),t._v(" "),2==t.check_status?i("div",{staticClass:"clearfix status-title"},[i("img",{attrs:{src:"static/images/user/verify.png",alt:""}}),t._v(" "),i("p",[t._v(t._s(t.$t("centification.centificationStatus3")))])]):t._e()]),t._v(" "),i("p",{staticClass:"title"},[t._v(t._s(t.$t("centification.userInfo")))]),t._v(" "),i("div",{staticClass:"info"},[i("p",{staticClass:"label"},[t._v(t._s(t.$t("centification.userInfo1"))),i("span",[t._v(t._s(t.info.truename))])]),t._v(" "),i("p",{staticClass:"label"},[t._v(t._s(t.$t("centification.userInfo2"))),i("span",[t._v(t._s(t.info.cardtype_name))])]),t._v(" "),i("p",{staticClass:"label"},[t._v(t._s(t.$t("centification.userInfo3"))),i("span",[t._v(t._s(t.info.idcard))])]),t._v(" "),i("p",{staticClass:"label"},[t._v(t._s(t.$t("centification.userInfo4"))),i("span",[t._v(t._s(t.info.create_time))])]),t._v(" "),0==t.check_status?i("P",{staticClass:"title noMt",on:{click:t.handleRecentify}},[t._v(t._s(t.$t("centification.reason")))]):t._e()],1)]):t._e()],1)},staticRenderFns:[]};var o=i("VU/8")(s,r,!1,function(t){i("Auct"),i("KZ1U")},"data-v-712275e1",null);e.default=o.exports},Auct:function(t,e){},KZ1U:function(t,e){}});