webpackJsonp([4,36,38,48,51,57],{"+rkW":function(t,i){},"+w35":function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("Gu7T"),r=n.n(e),s=n("Ka5H"),o=n("gyMJ"),a=a||{};a.Color=function(t){this.autoUpdate=!0,this.setHex(t)},a.Color.prototype={setRGBA:function(t,i,n,e){this.r=t,this.g=i,this.b=n,this.a=e,this.autoUpdate&&(this.updateHex(),this.updateStyleString())},setHex:function(t){this.hex=t,this.autoUpdate&&(this.updateRGBA(),this.updateStyleString())},copyRGB:function(t){this.r=t.r,this.g=t.g,this.b=t.b},copyRGBA:function(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a},multiplySelfRGB:function(t){this.r*=t.r,this.g*=t.g,this.b*=t.b},updateHex:function(){this.hex=Math.floor(255*this.a)<<24|Math.floor(255*this.r)<<16|Math.floor(255*this.g)<<8|Math.floor(255*this.b)},updateRGBA:function(){this.a=(this.hex>>24&255)/255,this.r=(this.hex>>16&255)/255,this.g=(this.hex>>8&255)/255,this.b=(255&this.hex)/255},updateStyleString:function(){this.__styleString="rgba("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+","+this.a+")"},toString:function(){return"THREE.Color ( r: "+this.r+", g: "+this.g+", b: "+this.b+", a: "+this.a+", hex: "+this.hex+" )"}},a.Vector2=function(t,i){this.x=t||0,this.y=i||0},a.Vector2.prototype={set:function(t,i){return this.x=t,this.y=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this},add:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this},sub:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},unit:function(){return this.multiplyScalar(1/this.length()),this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthSq:function(){return this.x*this.x+this.y*this.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},clone:function(){return new a.Vector2(this.x,this.y)},toString:function(){return"THREE.Vector2 ("+this.x+", "+this.y+")"}},a.Vector3=function(t,i,n){this.x=t||0,this.y=i||0,this.z=n||0},a.Vector3.prototype={set:function(t,i,n){return this.x=t,this.y=i,this.z=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},sub:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},cross:function(t,i){return this.x=t.y*i.z-t.z*i.y,this.y=t.z*i.x-t.x*i.z,this.z=t.x*i.y-t.y*i.x,this},crossSelf:function(t){var i=this.x,n=this.y,e=this.z;return this.x=n*t.z-e*t.y,this.y=e*t.x-i*t.z,this.z=i*t.y-n*t.x,this},multiplySelf:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScalar:function(t){return this.x/=t,this.y/=t,this.z/=t,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,n=this.y-t.y,e=this.z-t.z;return i*i+n*n+e*e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},normalize:function(){return this.length()>0?this.multiplyScalar(1/this.length()):this.multiplyScalar(0),this},setLength:function(t){return this.normalize().multiplyScalar(t)},isZero:function(){var t=1e-4;return Math.abs(this.x)<t&&Math.abs(this.y)<t&&Math.abs(this.z)<t},clone:function(){return new a.Vector3(this.x,this.y,this.z)},toString:function(){return"THREE.Vector3 ( "+this.x+", "+this.y+", "+this.z+" )"}},a.Vector4=function(t,i,n,e){this.x=t||0,this.y=i||0,this.z=n||0,this.w=e||1},a.Vector4.prototype={set:function(t,i,n,e){return this.x=t,this.y=i,this.z=n,this.w=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},add:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},sub:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},clone:function(){return new a.Vector4(this.x,this.y,this.z,this.w)},toString:function(){return"THREE.Vector4 ("+this.x+", "+this.y+", "+this.z+", "+this.w+")"}},a.Rectangle=function(){var t,i,n,e,r,s,o=!0;function a(){r=n-t,s=e-i}this.getX=function(){return t},this.getY=function(){return i},this.getWidth=function(){return r},this.getHeight=function(){return s},this.getX1=function(){return t},this.getY1=function(){return i},this.getX2=function(){return n},this.getY2=function(){return e},this.set=function(r,s,l,c){o=!1,t=r,i=s,n=l,e=c,a()},this.addPoint=function(r,s){o?(o=!1,t=r,i=s,n=r,e=s):(t=Math.min(t,r),i=Math.min(i,s),n=Math.max(n,r),e=Math.max(e,s)),a()},this.addRectangle=function(r){o?(o=!1,t=r.getX1(),i=r.getY1(),n=r.getX2(),e=r.getY2()):(t=Math.min(t,r.getX1()),i=Math.min(i,r.getY1()),n=Math.max(n,r.getX2()),e=Math.max(e,r.getY2())),a()},this.inflate=function(r){t-=r,i-=r,n+=r,e+=r,a()},this.minSelf=function(r){t=Math.max(t,r.getX1()),i=Math.max(i,r.getY1()),n=Math.min(n,r.getX2()),e=Math.min(e,r.getY2()),a()},this.instersects=function(r){return Math.min(n,r.getX2())-Math.max(t,r.getX1())>=0&&Math.min(e,r.getY2())-Math.max(i,r.getY1())>=0},this.empty=function(){o=!0,t=0,i=0,n=0,e=0,a()},this.isEmpty=function(){return o},this.toString=function(){return"THREE.Rectangle (x1: "+t+", y1: "+e+", x2: "+n+", y1: "+i+", width: "+r+", height: "+s+")"}},a.Matrix3=function(){this.m=[]},a.Matrix3.prototype={transpose:function(){var t;return t=this.m[1],this.m[1]=this.m[3],this.m[3]=t,t=this.m[2],this.m[2]=this.m[6],this.m[6]=t,t=this.m[5],this.m[5]=this.m[7],this.m[7]=t,this}},a.Matrix4=function(){this._x=new a.Vector3,this._y=new a.Vector3,this._z=new a.Vector3},a.Matrix4.prototype={n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1,identity:function(){this.n11=1,this.n12=0,this.n13=0,this.n14=0,this.n21=0,this.n22=1,this.n23=0,this.n24=0,this.n31=0,this.n32=0,this.n33=1,this.n34=0,this.n41=0,this.n42=0,this.n43=0,this.n44=1},copy:function(t){this.n11=t.n11,this.n12=t.n12,this.n13=t.n13,this.n14=t.n14,this.n21=t.n21,this.n22=t.n22,this.n23=t.n23,this.n24=t.n24,this.n31=t.n31,this.n32=t.n32,this.n33=t.n33,this.n34=t.n34,this.n41=t.n41,this.n42=t.n42,this.n43=t.n43,this.n44=t.n44},lookAt:function(t,i,n){var e=this._x,r=this._y,s=this._z;s.sub(t,i),s.normalize(),e.cross(n,s),e.normalize(),r.cross(s,e),r.normalize(),this.n11=e.x,this.n12=e.y,this.n13=e.z,this.n14=-e.dot(t),this.n21=r.x,this.n22=r.y,this.n23=r.z,this.n24=-r.dot(t),this.n31=s.x,this.n32=s.y,this.n33=s.z,this.n34=-s.dot(t),this.n41=0,this.n42=0,this.n43=0,this.n44=1},transform:function(t){var i=t.x,n=t.y,e=t.z,r=t.w?t.w:1;return t.x=this.n11*i+this.n12*n+this.n13*e+this.n14*r,t.y=this.n21*i+this.n22*n+this.n23*e+this.n24*r,t.z=this.n31*i+this.n32*n+this.n33*e+this.n34*r,r=this.n41*i+this.n42*n+this.n43*e+this.n44*r,t.w?t.w=r:(t.x=t.x/r,t.y=t.y/r,t.z=t.z/r),t},crossVector:function(t){var i=new a.Vector4;return i.x=this.n11*t.x+this.n12*t.y+this.n13*t.z+this.n14*t.w,i.y=this.n21*t.x+this.n22*t.y+this.n23*t.z+this.n24*t.w,i.z=this.n31*t.x+this.n32*t.y+this.n33*t.z+this.n34*t.w,i.w=t.w?this.n41*t.x+this.n42*t.y+this.n43*t.z+this.n44*t.w:1,i},multiply:function(t,i){this.n11=t.n11*i.n11+t.n12*i.n21+t.n13*i.n31+t.n14*i.n41,this.n12=t.n11*i.n12+t.n12*i.n22+t.n13*i.n32+t.n14*i.n42,this.n13=t.n11*i.n13+t.n12*i.n23+t.n13*i.n33+t.n14*i.n43,this.n14=t.n11*i.n14+t.n12*i.n24+t.n13*i.n34+t.n14*i.n44,this.n21=t.n21*i.n11+t.n22*i.n21+t.n23*i.n31+t.n24*i.n41,this.n22=t.n21*i.n12+t.n22*i.n22+t.n23*i.n32+t.n24*i.n42,this.n23=t.n21*i.n13+t.n22*i.n23+t.n23*i.n33+t.n24*i.n43,this.n24=t.n21*i.n14+t.n22*i.n24+t.n23*i.n34+t.n24*i.n44,this.n31=t.n31*i.n11+t.n32*i.n21+t.n33*i.n31+t.n34*i.n41,this.n32=t.n31*i.n12+t.n32*i.n22+t.n33*i.n32+t.n34*i.n42,this.n33=t.n31*i.n13+t.n32*i.n23+t.n33*i.n33+t.n34*i.n43,this.n34=t.n31*i.n14+t.n32*i.n24+t.n33*i.n34+t.n34*i.n44,this.n41=t.n41*i.n11+t.n42*i.n21+t.n43*i.n31+t.n44*i.n41,this.n42=t.n41*i.n12+t.n42*i.n22+t.n43*i.n32+t.n44*i.n42,this.n43=t.n41*i.n13+t.n42*i.n23+t.n43*i.n33+t.n44*i.n43,this.n44=t.n41*i.n14+t.n42*i.n24+t.n43*i.n34+t.n44*i.n44},multiplySelf:function(t){var i=this.n11,n=this.n12,e=this.n13,r=this.n14,s=this.n21,o=this.n22,a=this.n23,l=this.n24,c=this.n31,h=this.n32,u=this.n33,f=this.n34,d=this.n41,p=this.n42,m=this.n43,v=this.n44;this.n11=i*t.n11+n*t.n21+e*t.n31+r*t.n41,this.n12=i*t.n12+n*t.n22+e*t.n32+r*t.n42,this.n13=i*t.n13+n*t.n23+e*t.n33+r*t.n43,this.n14=i*t.n14+n*t.n24+e*t.n34+r*t.n44,this.n21=s*t.n11+o*t.n21+a*t.n31+l*t.n41,this.n22=s*t.n12+o*t.n22+a*t.n32+l*t.n42,this.n23=s*t.n13+o*t.n23+a*t.n33+l*t.n43,this.n24=s*t.n14+o*t.n24+a*t.n34+l*t.n44,this.n31=c*t.n11+h*t.n21+u*t.n31+f*t.n41,this.n32=c*t.n12+h*t.n22+u*t.n32+f*t.n42,this.n33=c*t.n13+h*t.n23+u*t.n33+f*t.n43,this.n34=c*t.n14+h*t.n24+u*t.n34+f*t.n44,this.n41=d*t.n11+p*t.n21+m*t.n31+v*t.n41,this.n42=d*t.n12+p*t.n22+m*t.n32+v*t.n42,this.n43=d*t.n13+p*t.n23+m*t.n33+v*t.n43,this.n44=d*t.n14+p*t.n24+m*t.n34+v*t.n44},multiplyScalar:function(t){this.n11*=t,this.n12*=t,this.n13*=t,this.n14*=t,this.n21*=t,this.n22*=t,this.n23*=t,this.n24*=t,this.n31*=t,this.n32*=t,this.n33*=t,this.n34*=t,this.n41*=t,this.n42*=t,this.n43*=t,this.n44*=t},determinant:function(){return this.n14*this.n23*this.n32*this.n41-this.n13*this.n24*this.n32*this.n41-this.n14*this.n22*this.n33*this.n41+this.n12*this.n24*this.n33*this.n41+this.n13*this.n22*this.n34*this.n41-this.n12*this.n23*this.n34*this.n41-this.n14*this.n23*this.n31*this.n42+this.n13*this.n24*this.n31*this.n42+this.n14*this.n21*this.n33*this.n42-this.n11*this.n24*this.n33*this.n42-this.n13*this.n21*this.n34*this.n42+this.n11*this.n23*this.n34*this.n42+this.n14*this.n22*this.n31*this.n43-this.n12*this.n24*this.n31*this.n43-this.n14*this.n21*this.n32*this.n43+this.n11*this.n24*this.n32*this.n43+this.n12*this.n21*this.n34*this.n43-this.n11*this.n22*this.n34*this.n43-this.n13*this.n22*this.n31*this.n44+this.n12*this.n23*this.n31*this.n44+this.n13*this.n21*this.n32*this.n44-this.n11*this.n23*this.n32*this.n44-this.n12*this.n21*this.n33*this.n44+this.n11*this.n22*this.n33*this.n44},transpose:function(){function t(t,i,n){var e=t[i];t[i]=t[n],t[n]=e}return t(this,"n21","n12"),t(this,"n31","n13"),t(this,"n32","n23"),t(this,"n41","n14"),t(this,"n42","n24"),t(this,"n43","n34"),this},clone:function(){var t=new a.Matrix4;return t.n11=this.n11,t.n12=this.n12,t.n13=this.n13,t.n14=this.n14,t.n21=this.n21,t.n22=this.n22,t.n23=this.n23,t.n24=this.n24,t.n31=this.n31,t.n32=this.n32,t.n33=this.n33,t.n34=this.n34,t.n41=this.n41,t.n42=this.n42,t.n43=this.n43,t.n44=this.n44,t},flatten:function(){return[this.n11,this.n21,this.n31,this.n41,this.n12,this.n22,this.n32,this.n42,this.n13,this.n23,this.n33,this.n43,this.n14,this.n24,this.n34,this.n44]},toString:function(){return"| "+this.n11+" "+this.n12+" "+this.n13+" "+this.n14+" |\n| "+this.n21+" "+this.n22+" "+this.n23+" "+this.n24+" |\n| "+this.n31+" "+this.n32+" "+this.n33+" "+this.n34+" |\n| "+this.n41+" "+this.n42+" "+this.n43+" "+this.n44+" |"}},a.Matrix4.translationMatrix=function(t,i,n){var e=new a.Matrix4;return e.n14=t,e.n24=i,e.n34=n,e},a.Matrix4.scaleMatrix=function(t,i,n){var e=new a.Matrix4;return e.n11=t,e.n22=i,e.n33=n,e},a.Matrix4.rotationXMatrix=function(t){var i=new a.Matrix4;return i.n22=i.n33=Math.cos(t),i.n32=Math.sin(t),i.n23=-i.n32,i},a.Matrix4.rotationYMatrix=function(t){var i=new a.Matrix4;return i.n11=i.n33=Math.cos(t),i.n13=Math.sin(t),i.n31=-i.n13,i},a.Matrix4.rotationZMatrix=function(t){var i=new a.Matrix4;return i.n11=i.n22=Math.cos(t),i.n21=Math.sin(t),i.n12=-i.n21,i},a.Matrix4.rotationAxisAngleMatrix=function(t,i){var n=new a.Matrix4,e=Math.cos(i),r=Math.sin(i),s=1-e,o=t.x,l=t.y,c=t.z;return n.n11=s*o*o+e,n.n12=s*o*l-r*c,n.n13=s*o*c+r*l,n.n21=s*o*l+r*c,n.n22=s*l*l+e,n.n23=s*l*c-r*o,n.n31=s*o*c-r*l,n.n32=s*l*c+r*o,n.n33=s*c*c+e,n},a.Matrix4.makeInvert=function(t){var i=new a.Matrix4;return i.n11=t.n23*t.n34*t.n42-t.n24*t.n33*t.n42+t.n24*t.n32*t.n43-t.n22*t.n34*t.n43-t.n23*t.n32*t.n44+t.n22*t.n33*t.n44,i.n12=t.n14*t.n33*t.n42-t.n13*t.n34*t.n42-t.n14*t.n32*t.n43+t.n12*t.n34*t.n43+t.n13*t.n32*t.n44-t.n12*t.n33*t.n44,i.n13=t.n13*t.n24*t.n42-t.n14*t.n23*t.n42+t.n14*t.n22*t.n43-t.n12*t.n24*t.n43-t.n13*t.n22*t.n44+t.n12*t.n23*t.n44,i.n14=t.n14*t.n23*t.n32-t.n13*t.n24*t.n32-t.n14*t.n22*t.n33+t.n12*t.n24*t.n33+t.n13*t.n22*t.n34-t.n12*t.n23*t.n34,i.n21=t.n24*t.n33*t.n41-t.n23*t.n34*t.n41-t.n24*t.n31*t.n43+t.n21*t.n34*t.n43+t.n23*t.n31*t.n44-t.n21*t.n33*t.n44,i.n22=t.n13*t.n34*t.n41-t.n14*t.n33*t.n41+t.n14*t.n31*t.n43-t.n11*t.n34*t.n43-t.n13*t.n31*t.n44+t.n11*t.n33*t.n44,i.n23=t.n14*t.n23*t.n41-t.n13*t.n24*t.n41-t.n14*t.n21*t.n43+t.n11*t.n24*t.n43+t.n13*t.n21*t.n44-t.n11*t.n23*t.n44,i.n24=t.n13*t.n24*t.n31-t.n14*t.n23*t.n31+t.n14*t.n21*t.n33-t.n11*t.n24*t.n33-t.n13*t.n21*t.n34+t.n11*t.n23*t.n34,i.n31=t.n22*t.n34*t.n41-t.n24*t.n32*t.n41+t.n24*t.n31*t.n42-t.n21*t.n34*t.n42-t.n22*t.n31*t.n44+t.n21*t.n32*t.n44,i.n32=t.n14*t.n32*t.n41-t.n12*t.n34*t.n41-t.n14*t.n31*t.n42+t.n11*t.n34*t.n42+t.n12*t.n31*t.n44-t.n11*t.n32*t.n44,i.n33=t.n13*t.n24*t.n41-t.n14*t.n22*t.n41+t.n14*t.n21*t.n42-t.n11*t.n24*t.n42-t.n12*t.n21*t.n44+t.n11*t.n22*t.n44,i.n34=t.n14*t.n22*t.n31-t.n12*t.n24*t.n31-t.n14*t.n21*t.n32+t.n11*t.n24*t.n32+t.n12*t.n21*t.n34-t.n11*t.n22*t.n34,i.n41=t.n23*t.n32*t.n41-t.n22*t.n33*t.n41-t.n23*t.n31*t.n42+t.n21*t.n33*t.n42+t.n22*t.n31*t.n43-t.n21*t.n32*t.n43,i.n42=t.n12*t.n33*t.n41-t.n13*t.n32*t.n41+t.n13*t.n31*t.n42-t.n11*t.n33*t.n42-t.n12*t.n31*t.n43+t.n11*t.n32*t.n43,i.n43=t.n13*t.n22*t.n41-t.n12*t.n23*t.n41-t.n13*t.n21*t.n42+t.n11*t.n23*t.n42+t.n12*t.n21*t.n43-t.n11*t.n22*t.n43,i.n44=t.n12*t.n23*t.n31-t.n13*t.n22*t.n31+t.n13*t.n21*t.n32-t.n11*t.n23*t.n32-t.n12*t.n21*t.n33+t.n11*t.n22*t.n33,i.multiplyScalar(1/t.determinant()),i},a.Matrix4.makeInvert3x3=function(t){var i,n=t.flatten(),e=new a.Matrix3,r=n[10]*n[5]-n[6]*n[9],s=-n[10]*n[1]+n[2]*n[9],o=n[6]*n[1]-n[2]*n[5],l=-n[10]*n[4]+n[6]*n[8],c=n[10]*n[0]-n[2]*n[8],h=-n[6]*n[0]+n[2]*n[4],u=n[9]*n[4]-n[5]*n[8],f=-n[9]*n[0]+n[1]*n[8],d=n[5]*n[0]-n[1]*n[4],p=n[0]*r+n[1]*l+n[2]*u;if(0==p)throw"matrix not invertible";return i=1/p,e.m[0]=i*r,e.m[1]=i*s,e.m[2]=i*o,e.m[3]=i*l,e.m[4]=i*c,e.m[5]=i*h,e.m[6]=i*u,e.m[7]=i*f,e.m[8]=i*d,e},a.Matrix4.makeFrustum=function(t,i,n,e,r,s){var o,l,c,h,u,f,d;return l=2*r/(i-t),c=2*r/(e-n),h=(i+t)/(i-t),u=(e+n)/(e-n),f=-(s+r)/(s-r),d=-2*s*r/(s-r),(o=new a.Matrix4).n11=l,o.n12=0,o.n13=h,o.n14=0,o.n21=0,o.n22=c,o.n23=u,o.n24=0,o.n31=0,o.n32=0,o.n33=f,o.n34=d,o.n41=0,o.n42=0,o.n43=-1,o.n44=0,o},a.Matrix4.makePerspective=function(t,i,n,e){var r,s,o,l;return o=(s=-(r=n*Math.tan(t*Math.PI/360)))*i,l=r*i,a.Matrix4.makeFrustum(o,l,s,r,n,e)},a.Matrix4.makeOrtho=function(t,i,n,e,r,s){var o,l,c,h,u,f,d;return o=new a.Matrix4,l=(i+t)/(u=i-t),c=(e+n)/(f=e-n),h=(s+r)/(d=s-r),o.n11=2/u,o.n12=0,o.n13=0,o.n14=-l,o.n21=0,o.n22=2/f,o.n23=0,o.n24=-c,o.n31=0,o.n32=0,o.n33=-2/d,o.n34=-h,o.n41=0,o.n42=0,o.n43=0,o.n44=1,o},a.Vertex=function(t,i){this.position=t||new a.Vector3,this.positionWorld=new a.Vector3,this.positionScreen=new a.Vector3,this.normal=i||new a.Vector3,this.normalWorld=new a.Vector3,this.normalScreen=new a.Vector3,this.__visible=!0},a.Vertex.prototype={toString:function(){return"THREE.Vertex ( position: "+this.position+", normal: "+this.normal+" )"}},a.Face3=function(t,i,n,e,r){this.a=t,this.b=i,this.c=n,this.centroid=new a.Vector3,this.normal=e instanceof a.Vector3?e:new a.Vector3,this.vertexNormals=e instanceof Array?e:[],this.material=r instanceof Array?r:[r]},a.Face3.prototype={toString:function(){return"THREE.Face3 ( "+this.a+", "+this.b+", "+this.c+" )"}},a.Face4=function(t,i,n,e,r,s){this.a=t,this.b=i,this.c=n,this.d=e,this.centroid=new a.Vector3,this.normal=r instanceof a.Vector3?r:new a.Vector3,this.vertexNormals=r instanceof Array?r:[],this.material=s instanceof Array?s:[s]},a.Face4.prototype={toString:function(){return"THREE.Face4 ( "+this.a+", "+this.b+", "+this.c+" "+this.d+" )"}},a.UV=function(t,i){this.u=t||0,this.v=i||0},a.UV.prototype={copy:function(t){this.u=t.u,this.v=t.v},toString:function(){return"THREE.UV ("+this.u+", "+this.v+")"}},a.Geometry=function(){this.vertices=[],this.faces=[],this.uvs=[]},a.Geometry.prototype={computeCentroids:function(){var t,i,n;for(t=0,i=this.faces.length;t<i;t++)(n=this.faces[t]).centroid.set(0,0,0),n instanceof a.Face3?(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.divideScalar(3)):n instanceof a.Face4&&(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.addSelf(this.vertices[n.d].position),n.centroid.divideScalar(4))},computeNormals:function(t){var i,n,e,r,s,o,l,c,h,u,f=new a.Vector3,d=new a.Vector3;for(e=0,r=this.vertices.length;e<r;e++)this.vertices[e].normal.set(0,0,0);for(s=0,o=this.faces.length;s<o;s++)if(l=this.faces[s],t&&l.vertexNormals.length){for(f.set(0,0,0),i=0,n=l.normal.length;i<n;i++)f.addSelf(l.vertexNormals[i]);f.divideScalar(3),f.isZero()||f.normalize(),l.normal.copy(f)}else c=this.vertices[l.a],h=this.vertices[l.b],u=this.vertices[l.c],f.sub(u.position,h.position),d.sub(c.position,h.position),f.crossSelf(d),f.isZero()||f.normalize(),l.normal.copy(f)},computeBoundingBox:function(){if(this.vertices.length>0){this.bbox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]};for(var t=1,i=this.vertices.length;t<i;t++)vertex=this.vertices[t],vertex.position.x<this.bbox.x[0]?this.bbox.x[0]=vertex.position.x:vertex.position.x>this.bbox.x[1]&&(this.bbox.x[1]=vertex.position.x),vertex.position.y<this.bbox.y[0]?this.bbox.y[0]=vertex.position.y:vertex.position.y>this.bbox.y[1]&&(this.bbox.y[1]=vertex.position.y),vertex.position.z<this.bbox.z[0]?this.bbox.z[0]=vertex.position.z:vertex.position.z>this.bbox.z[1]&&(this.bbox.z[1]=vertex.position.z)}},toString:function(){return"THREE.Geometry ( vertices: "+this.vertices+", faces: "+this.faces+" )"}},a.Camera=function(t,i,n,e){this.fov=t,this.aspect=i,this.position=new a.Vector3(0,0,0),this.target={position:new a.Vector3(0,0,0)},this.projectionMatrix=a.Matrix4.makePerspective(t,i,n,e),this.up=new a.Vector3(0,1,0),this.matrix=new a.Matrix4,this.autoUpdateMatrix=!0,this.updateMatrix=function(){this.matrix.lookAt(this.position,this.target.position,this.up)},this.toString=function(){return"THREE.Camera ( "+this.position+", "+this.target.position+" )"}},a.Light=function(t){this.color=new a.Color(255<<24|t)},a.AmbientLight=function(t){a.Light.call(this,t)},a.AmbientLight.prototype=new a.Light,a.AmbientLight.prototype.constructor=a.AmbientLight,a.DirectionalLight=function(t,i){a.Light.call(this,t),this.position=new a.Vector3(0,1,0),this.intensity=i||1},a.DirectionalLight.prototype=new a.Light,a.DirectionalLight.prototype.constructor=a.DirectionalLight,a.PointLight=function(t,i){a.Light.call(this,t),this.position=new a.Vector3(0,0,0),this.intensity=i||1},a.DirectionalLight.prototype=new a.Light,a.DirectionalLight.prototype.constructor=a.PointLight,a.Object3D=function(t){this.position=new a.Vector3,this.rotation=new a.Vector3,this.scale=new a.Vector3(1,1,1),this.matrix=new a.Matrix4,this.matrixTranslation=new a.Matrix4,this.matrixRotation=new a.Matrix4,this.matrixScale=new a.Matrix4,this.screen=new a.Vector3,this.autoUpdateMatrix=!0,this.updateMatrix=function(){this.matrixPosition=a.Matrix4.translationMatrix(this.position.x,this.position.y,this.position.z),this.matrixRotation=a.Matrix4.rotationXMatrix(this.rotation.x),this.matrixRotation.multiplySelf(a.Matrix4.rotationYMatrix(this.rotation.y)),this.matrixRotation.multiplySelf(a.Matrix4.rotationZMatrix(this.rotation.z)),this.matrixScale=a.Matrix4.scaleMatrix(this.scale.x,this.scale.y,this.scale.z),this.matrix.copy(this.matrixPosition),this.matrix.multiplySelf(this.matrixRotation),this.matrix.multiplySelf(this.matrixScale)}},a.Particle=function(t){a.Object3D.call(this),this.material=t instanceof Array?t:[t],this.autoUpdateMatrix=!1},a.Particle.prototype=new a.Object3D,a.Particle.prototype.constructor=a.Particle,a.Line=function(t,i){a.Object3D.call(this),this.geometry=t,this.material=i instanceof Array?i:[i]},a.Line.prototype=new a.Object3D,a.Line.prototype.constructor=a.Line,a.Mesh=function(t,i,n){a.Object3D.call(this),this.geometry=t,this.material=i instanceof Array?i:[i],this.flipSided=!1,this.doubleSided=!1,this.overdraw=!1,this.materialFaceGroup={},this.sortFacesByMaterial(),n&&this.normalizeUVs(),this.geometry.computeBoundingBox()},a.Mesh.prototype=new a.Object3D,a.Mesh.prototype.constructor=a.Mesh,a.Mesh.prototype.sortFacesByMaterial=function(){var t,i,n,e,r,s;function o(n){for(s=[],t=0,i=n.length;t<i;t++)void 0==n[t]?s.push("undefined"):s.push(n[t].toString());return s.join("_")}for(n=0,e=this.geometry.faces.length;n<e;n++)r=this.geometry.faces[n].material,hash=o(r),void 0==this.materialFaceGroup[hash]&&(this.materialFaceGroup[hash]={faces:[],material:r}),this.materialFaceGroup[hash].faces.push(n)},a.Mesh.prototype.normalizeUVs=function(){var t,i,n,e,r;for(t=0,i=this.geometry.uvs.length;t<i;t++)for(n=0,e=(r=this.geometry.uvs[t]).length;n<e;n++)1!=r[n].u&&(r[n].u=r[n].u-Math.floor(r[n].u)),1!=r[n].v&&(r[n].v=r[n].v-Math.floor(r[n].v))},a.LineColorMaterial=function(t,i,n){this.lineWidth=n||1,this.color=new a.Color((i>=0?255*i<<24:4278190080)|t)},a.LineColorMaterial.prototype={toString:function(){return"THREE.LineColorMaterial ( color: "+this.color+", lineWidth: "+this.lineWidth+" )"}},a.MeshPhongMaterial=function(t,i,n,e,r){this.ambient=new a.Color((r>=0?255*r<<24:4278190080)|t),this.diffuse=new a.Color((r>=0?255*r<<24:4278190080)|i),this.specular=new a.Color((r>=0?255*r<<24:4278190080)|n),this.shininess=e,this.opacity=r,this.toString=function(){return"THREE.MeshPhongMaterial ( <br/>ambient: "+this.ambient+", <br/>diffuse: "+this.diffuse+", <br/>specular: "+this.specular+", <br/>shininess: "+this.shininess+", <br/>opacity: "+this.opacity+")"}},a.MeshBitmapMaterial=function(t,i){this.bitmap=t,this.mode=i||a.MeshBitmapMaterialMode.UVMAPPING,this.id=a.MeshBitmapMaterialCounter.value++,this.toString=function(){return"THREE.MeshBitmapMaterial ( bitmap: "+this.bitmap+", mode: "+this.mode+", id: "+this.id+" )"}},a.MeshBitmapMaterialCounter={value:0},a.MeshBitmapMaterialMode={UVMAPPING:0},a.MeshColorFillMaterial=function(t,i){this.color=new a.Color((i>=0?255*i<<24:4278190080)|t),this.toString=function(){return"THREE.MeshColorFillMaterial ( color: "+this.color+" )"}},a.MeshColorStrokeMaterial=function(t,i,n){this.lineWidth=n||1,this.color=new a.Color((i>=0?255*i<<24:4278190080)|t),this.toString=function(){return"THREE.MeshColorStrokeMaterial ( lineWidth: "+this.lineWidth+", color: "+this.color+" )"}},a.MeshFaceMaterial=function(){this.toString=function(){return"THREE.MeshFaceMaterial"}},a.ParticleBitmapMaterial=function(t){this.bitmap=t,this.offset=new a.Vector2,this.toString=function(){return"THREE.ParticleBitmapMaterial ( bitmap: "+this.bitmap+" )"}},a.ParticleCircleMaterial=function(t,i){this.color=new a.Color((i>=0?255*i<<24:4278190080)|t),this.toString=function(){return"THREE.ParticleCircleMaterial ( color: "+this.color+" )"}},a.ParticleDOMMaterial=function(t){this.domElement=t,this.toString=function(){return"THREE.ParticleDOMMaterial ( domElement: "+this.domElement+" )"}},a.Scene=function(){this.objects=[],this.lights=[],this.addObject=function(t){this.objects.push(t)},this.removeObject=function(t){for(var i=0,n=this.objects.length;i<n;i++)if(t==this.objects[i])return void this.objects.splice(i,1)},this.addLight=function(t){this.lights.push(t)},this.removeLight=function(t){for(var i=0,n=this.lights.length;i<n;i++)if(t==this.lights[i])return void this.lights.splice(i,1)},this.add=function(t){this.addObject(t)},this.toString=function(){return"THREE.Scene ( "+this.objects+" )"}},a.Projector=function(){var t,i,n,e,r,s,o,l,c=null,h=[],u=[],f=[],d=[],p=new a.Vector4,m=new a.Matrix4,v=new a.Matrix4;this.projectScene=function(x,g){var y,_,b,M,w,S,C,L,z,R,A,E,P,T,V,B,F,U,G;for(c=[],i=0,e=0,s=0,l=0,g.autoUpdateMatrix&&g.updateMatrix(),m.multiply(g.projectionMatrix,g.matrix),y=0,_=(C=x.objects).length;y<_;y++)if(z=(L=C[y]).matrix,L.autoUpdateMatrix&&L.updateMatrix(),L instanceof a.Mesh){for(v.multiply(m,z),b=0,M=(R=L.geometry.vertices).length;b<M;b++)(E=(A=R[b]).positionScreen).copy(A.position),v.transform(E),A.__visible=E.z>0&&E.z<1;for(w=0,S=(T=L.geometry.faces).length;w<S;w++)(V=T[w])instanceof a.Face3?(B=R[V.a],F=R[V.b],U=R[V.c],B.__visible&&F.__visible&&U.__visible&&(L.doubleSided||L.flipSided!=(U.positionScreen.x-B.positionScreen.x)*(F.positionScreen.y-B.positionScreen.y)-(U.positionScreen.y-B.positionScreen.y)*(F.positionScreen.x-B.positionScreen.x)<0)&&((t=h[i]=h[i]||new a.RenderableFace3).v1.copy(B.positionScreen),t.v2.copy(F.positionScreen),t.v3.copy(U.positionScreen),t.centroidWorld.copy(V.centroid),L.matrix.transform(t.centroidWorld),t.normalWorld.copy(V.normal),L.matrixRotation.transform(t.normalWorld),t.z=Math.max(B.positionScreen.z,Math.max(F.positionScreen.z,U.positionScreen.z)),t.meshMaterial=L.material,t.faceMaterial=V.material,t.overdraw=L.overdraw,t.uvs=L.geometry.uvs[w],t.color=V.color,c.push(t),i++)):V instanceof a.Face4&&(B=R[V.a],F=R[V.b],U=R[V.c],G=R[V.d],B.__visible&&F.__visible&&U.__visible&&G.__visible&&(L.doubleSided||L.flipSided!=((G.positionScreen.x-B.positionScreen.x)*(F.positionScreen.y-B.positionScreen.y)-(G.positionScreen.y-B.positionScreen.y)*(F.positionScreen.x-B.positionScreen.x)<0||(F.positionScreen.x-U.positionScreen.x)*(G.positionScreen.y-U.positionScreen.y)-(F.positionScreen.y-U.positionScreen.y)*(G.positionScreen.x-U.positionScreen.x)<0))&&((n=u[e]=u[e]||new a.RenderableFace4).v1.copy(B.positionScreen),n.v2.copy(F.positionScreen),n.v3.copy(U.positionScreen),n.v4.copy(G.positionScreen),n.centroidWorld.copy(V.centroid),L.matrix.transform(n.centroidWorld),n.normalWorld.copy(V.normal),L.matrixRotation.transform(n.normalWorld),n.z=Math.max(B.positionScreen.z,Math.max(F.positionScreen.z,Math.max(U.positionScreen.z,G.positionScreen.z))),n.meshMaterial=L.material,n.faceMaterial=V.material,n.overdraw=L.overdraw,n.uvs=L.geometry.uvs[w],n.color=V.color,c.push(n),e++))}else if(L instanceof a.Line)for(v.multiply(m,z),b=0,M=(R=L.geometry.vertices).length;b<M;b++)(E=(A=R[b]).positionScreen).copy(A.position),v.transform(E),A.__visible=E.z>0&&E.z<1,b>0&&(P=L.geometry.vertices[b-1],A.__visible&&P.__visible&&((r=f[s]=f[s]||new a.RenderableLine).v1.copy(A.positionScreen),r.v2.copy(P.positionScreen),r.z=Math.max(A.positionScreen.z,P.positionScreen.z),r.material=L.material,c.push(r),s++));else L instanceof a.Particle&&(p.set(L.position.x,L.position.y,L.position.z,1),g.matrix.transform(p),g.projectionMatrix.transform(p),L.screen.set(p.x/p.w,p.y/p.w,p.z/p.w),L.screen.z>0&&L.screen.z<1&&((o=d[l]=d[l]||new a.RenderableParticle).x=L.screen.x,o.y=L.screen.y,o.z=L.screen.z,o.rotation=L.rotation.z,o.scale.x=L.scale.x*Math.abs(p.x/p.w-(p.x+g.projectionMatrix.n11)/(p.w+g.projectionMatrix.n14)),o.scale.y=L.scale.y*Math.abs(p.y/p.w-(p.y+g.projectionMatrix.n22)/(p.w+g.projectionMatrix.n24)),o.material=L.material,o.color=L.color,c.push(o),l++));return c.sort(function(t,i){return i.z-t.z}),c}},a.DOMRenderer=function(){a.Renderer.call(this);var t,i,n=null,e=new a.Projector,r=document.createElement("div");this.domElement=r,this.setSize=function(n,e){t=n/2,i=e/2},this.render=function(r,s){var o,l,c,h,u,f,d,p,m;for(o=0,l=(n=e.projectScene(r,s)).length;o<l;o++)if((u=n[o])instanceof a.RenderableParticle)for(p=u.x*t+t,m=u.y*i+i,c=0,h=u.material.length;c<h;c++)(f=u.material[c])instanceof a.ParticleDOMMaterial&&((d=f.domElement).style.left=p+"px",d.style.top=m+"px")}},a.CanvasRenderer=function(){var t,i,n,e,r=null,s=new a.Projector,o=document.createElement("canvas"),l=o.getContext("2d"),c=new a.Rectangle,h=new a.Rectangle,u=new a.Rectangle,f=!1,d=new a.Color(4294967295),p=new a.Color(4294967295),m=new a.Color(4294967295),v=2*Math.PI,x=new a.Vector2,g=new a.Vector3,y=new a.UV,_=new a.UV,b=new a.UV,M=new a.UV,w=new a.Vector2,S=new a.Vector2;function C(t,i,n){var e,r,s;for(e=0,r=t.lights.length;e<r;e++)(s=t.lights[e])instanceof a.DirectionalLight?(n.r+=s.color.r,n.g+=s.color.g,n.b+=s.color.b):s instanceof a.PointLight&&(n.r+=s.color.r,n.g+=s.color.g,n.b+=s.color.b)}function L(t,i,n){var e,r,s,o;for(e=0,r=t.lights.length;e<r;e++)(s=t.lights[e])instanceof a.DirectionalLight?(o=i.normalWorld.dot(s.position)*s.intensity)>0&&(n.r+=s.color.r*o,n.g+=s.color.g*o,n.b+=s.color.b*o):s instanceof a.PointLight&&(g.sub(s.position,i.centroidWorld),g.normalize(),(o=i.normalWorld.dot(g)*s.intensity)>0&&(n.r+=s.color.r*o,n.g+=s.color.g*o,n.b+=s.color.b*o))}function z(t,i,r,s,o){var h,x,g,y,_,b,M,w,S;if(s instanceof a.ParticleCircleMaterial){if(f?(p.copyRGB(m),C(o,0,p),d.copyRGBA(s.color),d.multiplySelfRGB(p),d.updateStyleString()):d=s.color,h=r.scale.x*n,x=r.scale.y*e,u.set(t-h,i-x,t+h,i+x),!c.instersects(u))return;l.save(),l.translate(t,i),l.rotate(-r.rotation),l.scale(h,x),l.beginPath(),l.arc(0,0,1,0,v,!0),l.closePath(),l.fillStyle=d.__styleString,l.fill(),l.restore()}else if(s instanceof a.ParticleBitmapMaterial){if(w=(M=s.bitmap).width/2,S=M.height/2,h=(g=r.scale.x*n)*w,x=(y=r.scale.y*e)*S,_=s.offset.x*g,b=s.offset.y*y,u.set(t+_-h,i+b-x,t+_+h,i+b+x),!c.instersects(u))return;l.save(),l.translate(t,i),l.rotate(-r.rotation),l.scale(g,-y),l.translate(-w+s.offset.x,-S-s.offset.y),l.drawImage(M,0,0),l.restore()}}function R(t,i,n,e,r,s,o){s instanceof a.LineColorMaterial&&(f?(p.copyRGB(m),C(o,0,p),d.copyRGBA(s.color),d.multiplySelfRGB(p),d.updateStyleString()):d=s.color,l.lineWidth=s.lineWidth,l.lineJoin="round",l.lineCap="round",l.strokeStyle=d.__styleString,l.stroke(),u.inflate(l.lineWidth))}function A(t,i,n,e,r,s,o,c,h){var v,x,g;c instanceof a.MeshColorFillMaterial?(f?(p.copyRGB(m),L(h,o,p),d.copyRGBA(c.color),d.multiplySelfRGB(p),d.updateStyleString()):d=c.color,l.beginPath(),l.moveTo(t,i),l.lineTo(n,e),l.lineTo(r,s),l.lineTo(t,i),l.closePath(),l.fillStyle=d.__styleString,l.fill()):c instanceof a.MeshColorStrokeMaterial?(f?(p.copyRGB(m),L(h,o,p),d.copyRGBA(c.color),d.multiplySelfRGB(p),d.updateStyleString()):d=c.color,l.beginPath(),l.moveTo(t,i),l.lineTo(n,e),l.lineTo(r,s),l.lineTo(t,i),l.closePath(),l.lineWidth=c.lineWidth,l.lineJoin="round",l.lineCap="round",l.strokeStyle=d.__styleString,l.stroke(),u.inflate(l.lineWidth)):c instanceof a.MeshBitmapMaterial&&(x=(v=c.bitmap).width-1,g=v.height-1,y.copy(o.uvs[0]),_.copy(o.uvs[1]),b.copy(o.uvs[2]),y.u*=x,y.v*=g,_.u*=x,_.v*=g,b.u*=x,b.v*=g,P(v,t,i,n,e,r,s,y.u,y.v,_.u,_.v,b.u,b.v))}function E(t,i,n,e,r,s,o,c,h,v,x,g,w,S,C){var z,R,A;S instanceof a.MeshColorFillMaterial?(f?(p.copyRGB(m),L(C,w,p),d.copyRGBA(S.color),d.multiplySelfRGB(p),d.updateStyleString()):d=S.color,l.beginPath(),l.moveTo(t,i),l.lineTo(n,e),l.lineTo(r,s),l.lineTo(o,c),l.lineTo(t,i),l.closePath(),l.fillStyle=d.__styleString,l.fill()):S instanceof a.MeshColorStrokeMaterial?(f?(p.copyRGB(m),L(C,w,p),d.copyRGBA(S.color),d.multiplySelfRGB(p),d.updateStyleString()):d=S.color,l.beginPath(),l.moveTo(t,i),l.lineTo(n,e),l.lineTo(r,s),l.lineTo(o,c),l.lineTo(t,i),l.closePath(),l.lineWidth=S.lineWidth,l.lineJoin="round",l.lineCap="round",l.strokeStyle=d.__styleString,l.stroke(),u.inflate(l.lineWidth)):S instanceof a.MeshBitmapMaterial&&(R=(z=S.bitmap).width-1,A=z.height-1,y.copy(w.uvs[0]),_.copy(w.uvs[1]),b.copy(w.uvs[2]),M.copy(w.uvs[3]),y.u*=R,y.v*=A,_.u*=R,_.v*=A,b.u*=R,b.v*=A,M.u*=R,M.v*=A,P(z,t,i,n,e,o,c,y.u,y.v,_.u,_.v,M.u,M.v),P(z,h,v,r,s,x,g,_.u,_.v,b.u,b.v,M.u,M.v))}function P(t,i,n,e,r,s,o,a,c,h,u,f,d){var p,m,v,x,g,y,_;l.beginPath(),l.moveTo(i,n),l.lineTo(e,r),l.lineTo(s,o),l.lineTo(i,n),l.closePath(),l.save(),l.clip(),m=-(c*(s-e)-u*s+d*e+(u-d)*i)/(p=a*(d-u)-h*d+f*u+(h-f)*c),v=(u*o+c*(r-o)-d*r+(d-u)*n)/p,x=(a*(s-e)-h*s+f*e+(h-f)*i)/p,g=-(h*o+a*(r-o)-f*r+(f-h)*n)/p,y=(a*(d*e-u*s)+c*(h*s-f*e)+(f*u-h*d)*i)/p,_=(a*(d*r-u*o)+c*(h*o-f*r)+(f*u-h*d)*n)/p,l.transform(m,v,x,g,y,_),l.drawImage(t,0,0),l.restore()}function T(t,i){x.sub(i,t),x.unit(),x.multiplyScalar(.75),i.addSelf(x),t.subSelf(x)}this.domElement=o,this.autoClear=!0,this.setSize=function(r,s){n=(t=r)/2,e=(i=s)/2,o.width=t,o.height=i,c.set(-n,-e,n,e)},this.clear=function(){h.isEmpty()||(h.inflate(1),h.minSelf(c),l.setTransform(1,0,0,-1,n,e),l.clearRect(h.getX(),h.getY(),h.getWidth(),h.getHeight()),h.empty())},this.render=function(t,i){var o,d,p,v,x,g,y,_,b,M,C,L,P,V,B,F,U,G,k,D;for(this.autoClear&&this.clear(),r=s.projectScene(t,i),l.setTransform(1,0,0,-1,n,e),(f=t.lights.length>0)&&function(t,i){var n,e,r;for(i.setRGBA(1,1,1,1),n=0,e=t.lights.length;n<e;n++)(r=t.lights[n])instanceof a.AmbientLight&&(i.r*=r.color.r,i.g*=r.color.g,i.b*=r.color.b)}(t,m),o=0,d=r.length;o<d;o++){if(p=r[o],u.empty(),p instanceof a.RenderableParticle)for(b=p.x*n,M=p.y*e,v=0,x=p.material.length;v<x;v++)z(b,M,p,_=p.material[v],t);else if(p instanceof a.RenderableLine){if(b=p.v1.x*n,M=p.v1.y*e,C=p.v2.x*n,L=p.v2.y*e,u.addPoint(b,M),u.addPoint(C,L),!c.instersects(u))continue;for(l.beginPath(),l.moveTo(b,M),l.lineTo(C,L),l.closePath(),v=0,x=p.material.length;v<x;v++)R(b,M,C,L,p,_=p.material[v],t)}else if(p instanceof a.RenderableFace3){if(p.v1.x*=n,p.v1.y*=e,p.v2.x*=n,p.v2.y*=e,p.v3.x*=n,p.v3.y*=e,p.overdraw&&(T(p.v1,p.v2),T(p.v2,p.v3),T(p.v3,p.v1)),b=p.v1.x,M=p.v1.y,C=p.v2.x,L=p.v2.y,P=p.v3.x,V=p.v3.y,u.addPoint(b,M),u.addPoint(C,L),u.addPoint(P,V),!c.instersects(u))continue;for(v=0,x=p.meshMaterial.length;v<x;)if((_=p.meshMaterial[v++])instanceof a.MeshFaceMaterial)for(g=0,y=p.faceMaterial.length;g<y;)A(b,M,C,L,P,V,p,_=p.faceMaterial[g++],t);else A(b,M,C,L,P,V,p,_,t)}else if(p instanceof a.RenderableFace4){if(p.v1.x*=n,p.v1.y*=e,p.v2.x*=n,p.v2.y*=e,p.v3.x*=n,p.v3.y*=e,p.v4.x*=n,p.v4.y*=e,w.copy(p.v2),S.copy(p.v4),p.overdraw&&(T(p.v1,p.v2),T(p.v2,p.v4),T(p.v4,p.v1)),b=p.v1.x,M=p.v1.y,C=p.v2.x,L=p.v2.y,B=p.v4.x,F=p.v4.y,p.overdraw&&(T(p.v3,w),T(p.v3,S)),P=p.v3.x,V=p.v3.y,U=w.x,G=w.y,k=S.x,D=S.y,u.addPoint(b,M),u.addPoint(C,L),u.addPoint(P,V),u.addPoint(B,F),!c.instersects(u))continue;for(v=0,x=p.meshMaterial.length;v<x;)if((_=p.meshMaterial[v++])instanceof a.MeshFaceMaterial)for(g=0,y=p.faceMaterial.length;g<y;)E(b,M,C,L,P,V,B,F,U,G,k,D,p,_=p.faceMaterial[g++],t);else E(b,M,C,L,P,V,B,F,U,G,k,D,p,_,t)}h.addRectangle(u)}l.setTransform(1,0,0,1,0,0)}},a.SVGRenderer=function(){var t,i,n,e,r,s,o,l=null,c=new a.Projector,h=document.createElementNS("http://www.w3.org/2000/svg","svg"),u=new a.Rectangle,f=new a.Rectangle,d=!1,p=new a.Color(4294967295),m=new a.Color(4294967295),v=new a.Color(4294967295),x=new a.Vector3,g=[],y=[],_=1;function b(t,i,n){var e,r,s,o;for(e=0,r=t.lights.length;e<r;e++)(s=t.lights[e])instanceof a.DirectionalLight?(o=i.normalWorld.dot(s.position)*s.intensity)>0&&(n.r+=s.color.r*o,n.g+=s.color.g*o,n.b+=s.color.b*o):s instanceof a.PointLight&&(x.sub(s.position,i.centroidWorld),x.normalize(),(o=i.normalWorld.dot(x)*s.intensity)>0&&(n.r+=s.color.r*o,n.g+=s.color.g*o,n.b+=s.color.b*o))}function M(t,i,e,s,l){(r=function(t){if(null==y[t])return y[t]=document.createElementNS("http://www.w3.org/2000/svg","circle"),0==_&&y[t].setAttribute("shape-rendering","crispEdges"),y[t];return y[t]}(o++)).setAttribute("cx",t),r.setAttribute("cy",i),r.setAttribute("r",e.scale.x*n),s instanceof a.ParticleCircleMaterial&&(d?(m.copyRGB(v),function(t,i,n){var e,r,s;for(e=0,r=t.lights.length;e<r;e++)(s=t.lights[e])instanceof a.DirectionalLight?(n.r+=s.color.r,n.g+=s.color.g,n.b+=s.color.b):s instanceof a.PointLight&&(n.r+=s.color.r,n.g+=s.color.g,n.b+=s.color.b)}(l,0,m),p.copyRGBA(s.color),p.multiplySelfRGB(m),p.updateStyleString()):p=s.color,r.setAttribute("style","fill: "+p.__styleString)),h.appendChild(r)}function w(t,i,n,e,o,l,c,u,f){(r=C(s++)).setAttribute("d","M "+t+" "+i+" L "+n+" "+e+" L "+o+","+l+"z"),u instanceof a.MeshColorFillMaterial?(d?(m.copyRGB(v),b(f,c,m),p.copyRGBA(u.color),p.multiplySelfRGB(m),p.updateStyleString()):p=u.color,r.setAttribute("style","fill: "+p.__styleString)):u instanceof a.MeshColorStrokeMaterial&&(d?(m.copyRGB(v),b(f,c,m),p.copyRGBA(u.color),p.multiplySelfRGB(m),p.updateStyleString()):p=u.color,r.setAttribute("style","fill: none; stroke: "+p.__styleString+"; stroke-width: "+u.lineWidth+"; stroke-linecap: round; stroke-linejoin: round")),h.appendChild(r)}function S(t,i,n,e,o,l,c,u,f,x,g){(r=C(s++)).setAttribute("d","M "+t+" "+i+" L "+n+" "+e+" L "+o+","+l+" L "+c+","+u+"z"),x instanceof a.MeshColorFillMaterial?(d?(m.copyRGB(v),b(g,f,m),p.copyRGBA(x.color),p.multiplySelfRGB(m),p.updateStyleString()):p=x.color,r.setAttribute("style","fill: "+p.__styleString)):x instanceof a.MeshColorStrokeMaterial&&(d?(m.copyRGB(v),b(g,f,m),p.copyRGBA(x.color),p.multiplySelfRGB(m),p.updateStyleString()):p=x.color,r.setAttribute("style","fill: none; stroke: "+p.__styleString+"; stroke-width: "+x.lineWidth+"; stroke-linecap: round; stroke-linejoin: round")),h.appendChild(r)}function C(t){return null==g[t]?(g[t]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==_&&g[t].setAttribute("shape-rendering","crispEdges"),g[t]):g[t]}this.domElement=h,this.autoClear=!0,this.setQuality=function(t){switch(t){case"high":_=1;break;case"low":_=0}},this.setSize=function(r,s){n=(t=r)/2,e=(i=s)/2,h.setAttribute("viewBox",-n+" "+-e+" "+t+" "+i),h.setAttribute("width",t),h.setAttribute("height",i),u.set(-n,-e,n,e)},this.clear=function(){for(;h.childNodes.length>0;)h.removeChild(h.childNodes[0])},this.render=function(t,i){var r,h,p,m,x,g,y,_,b,C,L,z,R,A,E,P;for(this.autoClear&&this.clear(),l=c.projectScene(t,i),s=0,o=0,(d=t.lights.length>0)&&function(t,i){var n,e,r;for(i.setRGBA(1,1,1,1),n=0,e=t.lights.length;n<e;n++)(r=t.lights[n])instanceof a.AmbientLight&&(i.r*=r.color.r,i.g*=r.color.g,i.b*=r.color.b)}(t,v),r=0,h=l.length;r<h;r++)if(y=l[r],f.empty(),y instanceof a.RenderableParticle)for(b=y.x*n,C=y.y*-e,p=0,m=y.material.length;p<m;p++)M(b,C,y,_=y.material[p],t);else if(y instanceof a.RenderableFace3){if(b=y.v1.x*n,C=y.v1.y*-e,L=y.v2.x*n,z=y.v2.y*-e,R=y.v3.x*n,A=y.v3.y*-e,f.addPoint(b,C),f.addPoint(L,z),f.addPoint(R,A),!u.instersects(f))continue;for(p=0,m=y.meshMaterial.length;p<m;)if((_=y.meshMaterial[p++])instanceof a.MeshFaceMaterial)for(x=0,g=y.faceMaterial.length;x<g;)w(b,C,L,z,R,A,y,_=y.faceMaterial[x++],t);else w(b,C,L,z,R,A,y,_,t)}else if(y instanceof a.RenderableFace4){if(b=y.v1.x*n,C=y.v1.y*-e,L=y.v2.x*n,z=y.v2.y*-e,R=y.v3.x*n,A=y.v3.y*-e,E=y.v4.x*n,P=y.v4.y*-e,f.addPoint(b,C),f.addPoint(L,z),f.addPoint(R,A),f.addPoint(E,P),!u.instersects(f))continue;for(p=0,m=y.meshMaterial.length;p<m;)if((_=y.meshMaterial[p++])instanceof a.MeshFaceMaterial)for(x=0,g=y.faceMaterial.length;x<g;)S(b,C,L,z,R,A,E,P,y,_=y.faceMaterial[x++],t);else S(b,C,L,z,R,A,E,P,y,_,t)}}},a.WebGLRenderer=function(){var t,i,n,e=document.createElement("canvas"),r=new a.Matrix4;function s(i,n){var e;return"fragment"==i?e=t.createShader(t.FRAGMENT_SHADER):"vertex"==i&&(e=t.createShader(t.VERTEX_SHADER)),t.shaderSource(e,n),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(alert(t.getShaderInfoLog(e)),null)}this.domElement=e,this.autoClear=!0,function(){try{t=e.getContext("experimental-webgl",{antialias:!0})}catch(t){}if(!t)throw alert("WebGL not supported"),"cannot create webgl context";t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0)}(),function(){i=t.createProgram(),t.attachShader(i,s("fragment",["#ifdef GL_ES","precision highp float;","#endif","uniform sampler2D diffuse;","uniform vec4 uniformColor;","varying vec2 vertexUv;","varying vec3 lightWeighting;","varying vec3 vNormal;","uniform int material;","uniform vec4 mAmbient;","uniform vec4 mDiffuse;","uniform vec4 mSpecular;","uniform float mShininess;","varying vec3 pLightVectorPoint;","varying vec3 pLightVectorDirection;","varying vec3 pViewPosition;","void main(){","if(material==3) { ","vec3 lightVectorPoint = normalize(pLightVectorPoint);","vec3 lightVectorDir = normalize(pLightVectorDirection);","vec3 normal = normalize(vNormal);","vec3 viewPosition = normalize(pViewPosition);","vec3 halfVectorPoint = normalize(pLightVectorPoint + pViewPosition);","float dotNormalHalfPoint = dot(normal, halfVectorPoint);","float ambientCompPoint = 1.0;","float diffuseCompPoint = max(dot(normal, lightVectorPoint), 0.0);","float specularCompPoint = pow(dotNormalHalfPoint, mShininess);","vec4 ambientPoint  = mAmbient * ambientCompPoint;","vec4 diffusePoint  = mDiffuse * diffuseCompPoint;","vec4 specularPoint = mSpecular * specularCompPoint;","vec3 halfVectorDir = normalize(pLightVectorDirection + pViewPosition);","float dotNormalHalfDir = dot(normal, halfVectorDir);","float ambientCompDir = 1.0;","float diffuseCompDir = max(dot(normal, lightVectorDir), 0.0);","float specularCompDir = pow(dotNormalHalfDir, mShininess);","vec4 ambientDir  = mAmbient * ambientCompDir;","vec4 diffuseDir  = mDiffuse * diffuseCompDir;","vec4 specularDir = mSpecular * specularCompDir;","vec4 pointLight = ambientPoint + diffusePoint + specularPoint;","vec4 dirLight = ambientDir + diffuseDir + specularDir;","gl_FragColor = vec4((pointLight.xyz + dirLight.xyz) * lightWeighting, 1.0);","} else if(material==2) {","vec4 texelColor = texture2D(diffuse, vertexUv);","gl_FragColor = vec4(texelColor.rgb * lightWeighting, texelColor.a);","} else if(material==1) {","gl_FragColor = vec4(uniformColor.rgb * lightWeighting, uniformColor.a);","} else {","gl_FragColor = vec4(uniformColor.rgb * lightWeighting, uniformColor.a);","}","}"].join("\n"))),t.attachShader(i,s("vertex",["attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","uniform bool enableLighting;","uniform vec3 ambientColor;","uniform vec3 directionalColor;","uniform vec3 lightingDirection;","uniform vec3 pointColor;","uniform vec3 pointPosition;","uniform mat4 objMatrix;","uniform mat4 viewMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat3 normalMatrix;","varying vec4 vertexColor;","varying vec2 vertexUv;","varying vec3 lightWeighting;","varying vec3 vNormal;","varying vec3 pLightVectorPoint;","varying vec3 pLightVectorDirection;","varying vec3 pViewPosition;","uniform vec3 cameraPosition;","void main(void) {","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec3 transformedNormal = normalize(normalMatrix * normal);","vec4 lPosition = viewMatrix * vec4( pointPosition, 1.0 );","vec4 lDirection = viewMatrix * vec4( lightingDirection, 0.0 );","pLightVectorPoint = normalize(pointPosition.xyz - position.xyz);","pLightVectorDirection = normalize(lDirection.xyz);","vec4 mPosition = objMatrix * vec4( position, 1.0 );","pViewPosition = cameraPosition - mPosition.xyz;","if(!enableLighting) {","lightWeighting = vec3(1.0, 1.0, 1.0);","} else {","vec3 pointLight = normalize(lPosition.xyz - mvPosition.xyz);","float directionalLightWeighting = max(dot(transformedNormal, normalize(lDirection.xyz)), 0.0);","float pointLightWeighting = max(dot(transformedNormal, pointLight), 0.0);","lightWeighting = ambientColor + directionalColor * directionalLightWeighting + pointColor * pointLightWeighting;","}","vNormal = transformedNormal;","vertexUv = uv;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"))),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||alert("Could not initialise shaders");t.useProgram(i),i.viewMatrix=t.getUniformLocation(i,"viewMatrix"),i.modelViewMatrix=t.getUniformLocation(i,"modelViewMatrix"),i.projectionMatrix=t.getUniformLocation(i,"projectionMatrix"),i.normalMatrix=t.getUniformLocation(i,"normalMatrix"),i.objMatrix=t.getUniformLocation(i,"objMatrix"),i.enableLighting=t.getUniformLocation(i,"enableLighting"),i.ambientColor=t.getUniformLocation(i,"ambientColor"),i.directionalColor=t.getUniformLocation(i,"directionalColor"),i.lightingDirection=t.getUniformLocation(i,"lightingDirection"),i.pointColor=t.getUniformLocation(i,"pointColor"),i.pointPosition=t.getUniformLocation(i,"pointPosition"),i.material=t.getUniformLocation(i,"material"),i.uniformColor=t.getUniformLocation(i,"uniformColor"),i.mAmbient=t.getUniformLocation(i,"mAmbient"),i.mDiffuse=t.getUniformLocation(i,"mDiffuse"),i.mSpecular=t.getUniformLocation(i,"mSpecular"),i.mShininess=t.getUniformLocation(i,"mShininess"),i.cameraPosition=t.getUniformLocation(i,"cameraPosition"),i.position=t.getAttribLocation(i,"position"),t.enableVertexAttribArray(i.position),i.normal=t.getAttribLocation(i,"normal"),t.enableVertexAttribArray(i.normal),i.uv=t.getAttribLocation(i,"uv"),t.enableVertexAttribArray(i.uv),i.diffuse=t.getUniformLocation(i,"diffuse"),t.uniform1i(i.diffuse,0),i.viewMatrixArray=new Float32Array(16),i.modelViewMatrixArray=new Float32Array(16),i.projectionMatrixArray=new Float32Array(16)}(),this.setSize=function(i,n){e.width=i,e.height=n,t.viewport(0,0,e.width,e.height)},this.clear=function(){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},this.setupLights=function(n){var e,r,s,o,l,c;for(t.uniform1i(i.enableLighting,n.lights.length),e=0,r=n.lights.length;e<r;e++)(c=n.lights[e])instanceof a.AmbientLight?(s=c.color,t.uniform3f(i.ambientColor,s.r,s.g,s.b)):c instanceof a.DirectionalLight?(s=c.color,o=c.position,l=c.intensity,t.uniform3f(i.lightingDirection,o.x,o.y,o.z),t.uniform3f(i.directionalColor,s.r*l,s.g*l,s.b*l)):c instanceof a.PointLight&&(s=c.color,o=c.position,l=c.intensity,t.uniform3f(i.pointPosition,o.x,o.y,o.z),t.uniform3f(i.pointColor,s.r*l,s.g*l,s.b*l))},this.createBuffers=function(i,n){var e,r,s,o,l,c,h,u,f,d,p,m=i.materialFaceGroup[n],v=[],x=[],g=[],y=[],_=[],b=0;for(e=0,r=m.faces.length;e<r;e++)s=m.faces[e],l=(o=i.geometry.faces[s]).vertexNormals,c=o.normal,h=i.geometry.uvs[s],o instanceof a.Face3?(u=i.geometry.vertices[o.a].position,f=i.geometry.vertices[o.b].position,d=i.geometry.vertices[o.c].position,g.push(u.x,u.y,u.z),g.push(f.x,f.y,f.z),g.push(d.x,d.y,d.z),3==l.length?(y.push(l[0].x,l[0].y,l[0].z),y.push(l[1].x,l[1].y,l[1].z),y.push(l[2].x,l[2].y,l[2].z)):(y.push(c.x,c.y,c.z),y.push(c.x,c.y,c.z),y.push(c.x,c.y,c.z)),h&&(_.push(h[0].u,h[0].v),_.push(h[1].u,h[1].v),_.push(h[2].u,h[2].v)),v.push(b,b+1,b+2),x.push(b,b+1),x.push(b,b+2),x.push(b+1,b+2),b+=3):o instanceof a.Face4&&(u=i.geometry.vertices[o.a].position,f=i.geometry.vertices[o.b].position,d=i.geometry.vertices[o.c].position,p=i.geometry.vertices[o.d].position,g.push(u.x,u.y,u.z),g.push(f.x,f.y,f.z),g.push(d.x,d.y,d.z),g.push(p.x,p.y,p.z),4==l.length?(y.push(l[0].x,l[0].y,l[0].z),y.push(l[1].x,l[1].y,l[1].z),y.push(l[2].x,l[2].y,l[2].z),y.push(l[3].x,l[3].y,l[3].z)):(y.push(c.x,c.y,c.z),y.push(c.x,c.y,c.z),y.push(c.x,c.y,c.z),y.push(c.x,c.y,c.z)),h&&(_.push(h[0].u,h[0].v),_.push(h[1].u,h[1].v),_.push(h[2].u,h[2].v),_.push(h[3].u,h[3].v)),v.push(b,b+1,b+2),v.push(b,b+2,b+3),x.push(b,b+1),x.push(b,b+2),x.push(b,b+3),x.push(b+1,b+2),x.push(b+2,b+3),b+=4);g.length&&(m.__webGLVertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,m.__webGLVertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(g),t.STATIC_DRAW),m.__webGLNormalBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,m.__webGLNormalBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(y),t.STATIC_DRAW),m.__webGLUVBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,m.__webGLUVBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(_),t.STATIC_DRAW),m.__webGLFaceBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,m.__webGLFaceBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(v),t.STATIC_DRAW),m.__webGLLineBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,m.__webGLLineBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(x),t.STATIC_DRAW),m.__webGLFaceCount=v.length,m.__webGLLineCount=x.length)},this.renderBuffer=function(n,e){n instanceof a.MeshPhongMaterial?(mAmbient=n.ambient,mDiffuse=n.diffuse,mSpecular=n.specular,t.uniform4f(i.mAmbient,mAmbient.r,mAmbient.g,mAmbient.b,n.opacity),t.uniform4f(i.mDiffuse,mDiffuse.r,mDiffuse.g,mDiffuse.b,n.opacity),t.uniform4f(i.mSpecular,mSpecular.r,mSpecular.g,mSpecular.b,n.opacity),t.uniform1f(i.mShininess,n.shininess),t.uniform1i(i.material,3)):n instanceof a.MeshColorFillMaterial?(color=n.color,t.uniform4f(i.uniformColor,color.r*color.a,color.g*color.a,color.b*color.a,color.a),t.uniform1i(i.material,0)):n instanceof a.MeshColorStrokeMaterial?(lineWidth=n.lineWidth,color=n.color,t.uniform4f(i.uniformColor,color.r*color.a,color.g*color.a,color.b*color.a,color.a),t.uniform1i(i.material,1)):n instanceof a.MeshBitmapMaterial&&(!n.__webGLTexture&&n.loaded&&(n.__webGLTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n.__webGLTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n.bitmap),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n.__webGLTexture),t.uniform1i(i.diffuse,0),t.uniform1i(i.material,2)),t.bindBuffer(t.ARRAY_BUFFER,e.__webGLVertexBuffer),t.vertexAttribPointer(i.position,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e.__webGLNormalBuffer),t.vertexAttribPointer(i.normal,3,t.FLOAT,!1,0,0),n instanceof a.MeshBitmapMaterial?(t.bindBuffer(t.ARRAY_BUFFER,e.__webGLUVBuffer),t.enableVertexAttribArray(i.uv),t.vertexAttribPointer(i.uv,2,t.FLOAT,!1,0,0)):t.disableVertexAttribArray(i.uv),n instanceof a.MeshBitmapMaterial||n instanceof a.MeshColorFillMaterial||n instanceof a.MeshPhongMaterial?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.__webGLFaceBuffer),t.drawElements(t.TRIANGLES,e.__webGLFaceCount,t.UNSIGNED_SHORT,0)):n instanceof a.MeshColorStrokeMaterial&&(t.lineWidth(lineWidth),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.__webGLLineBuffer),t.drawElements(t.LINES,e.__webGLLineCount,t.UNSIGNED_SHORT,0))},this.renderMesh=function(t,i){var n,e,r,s,o,l,c,h;for(o in t.materialFaceGroup)for((h=t.materialFaceGroup[o]).__webGLVertexBuffer||this.createBuffers(t,o),r=0,s=t.material.length;r<s;r++)if((c=t.material[r])instanceof a.MeshFaceMaterial)for(n=0,e=h.material.length;n<e;n++)l=h.material[n],this.renderBuffer(l,h);else l=c,this.renderBuffer(l,h)},this.setupMatrices=function(e,s){e.autoUpdateMatrix&&e.updateMatrix(),r.multiply(s.matrix,e.matrix),i.viewMatrixArray=new Float32Array(s.matrix.flatten()),i.modelViewMatrixArray=new Float32Array(r.flatten()),i.projectionMatrixArray=new Float32Array(s.projectionMatrix.flatten()),n=a.Matrix4.makeInvert3x3(r).transpose(),i.normalMatrixArray=new Float32Array(n.m),t.uniformMatrix4fv(i.viewMatrix,!1,i.viewMatrixArray),t.uniformMatrix4fv(i.modelViewMatrix,!1,i.modelViewMatrixArray),t.uniformMatrix4fv(i.projectionMatrix,!1,i.projectionMatrixArray),t.uniformMatrix3fv(i.normalMatrix,!1,i.normalMatrixArray),t.uniformMatrix4fv(i.objMatrix,!1,new Float32Array(e.matrix.flatten()))},this.render=function(n,e){var r,s,o;for(this.autoClear&&this.clear(),e.autoUpdateMatrix&&e.updateMatrix(),t.uniform3f(i.cameraPosition,e.position.x,e.position.y,e.position.z),this.setupLights(n),r=0,s=n.objects.length;r<s;r++)o=n.objects[r],this.setupMatrices(o,e),o instanceof a.Mesh?this.renderMesh(o,e):o instanceof a.Line||a.Particle}},a.RenderableFace3=function(){this.v1=new a.Vector2,this.v2=new a.Vector2,this.v3=new a.Vector2,this.centroidWorld=new a.Vector3,this.normalWorld=new a.Vector3,this.z=null,this.color=null,this.material=null},a.RenderableFace4=function(){this.v1=new a.Vector2,this.v2=new a.Vector2,this.v3=new a.Vector2,this.v4=new a.Vector2,this.centroidWorld=new a.Vector3,this.normalWorld=new a.Vector3,this.z=null,this.color=null,this.material=null},a.RenderableParticle=function(){this.x=null,this.y=null,this.z=null,this.rotation=null,this.scale=new a.Vector2,this.color=null,this.material=null},a.RenderableLine=function(){this.v1=new a.Vector2,this.v2=new a.Vector2,this.z=null,this.color=null,this.material=null};var l=a,c={data:function(){return{bannerList:[]}},methods:{initBannerList:function(){var t=this;Object(o.d)().then(function(i){if(1e3!==i.status)return!1;t.bannerList=[].concat(r()(i.data))}).catch(function(){})},liziInit:function(){var t,i,n,e,r,s,o,a=window.innerWidth-100,c=360,h=90,u=30,f=30,d=0,p=window.innerWidth/2;function m(t){d=t.clientX-p}!function(){(t=document.createElement("div")).style.position="relative",t.style.top="10px",document.getElementById("indexLizi").appendChild(t),(r=new l.Camera(75,a/c,1,1e4)).position.z=1e3,s=new l.Scene,(o=new l.CanvasRenderer).setSize(a,c),i=[];for(var d=0,p=new l.ParticleCircleMaterial("0x097bdb",1),v=0;v<u;v++)for(var x=0;x<f;x++)(n=i[d++]=new l.Particle(p)).position.x=v*h-u*h/2,n.position.z=x*h-f*h/2,s.add(n);e=0,t.appendChild(o.domElement),document.addEventListener("mousemove",m,!1)}(),this.interval=setInterval(function(){r.position.x+=.05*(d-r.position.x),r.position.y=364;for(var t=0,a=0;a<u;a++)for(var l=0;l<f;l++)(n=i[t++]).position.y=50*Math.sin(.3*(a+e))+50*Math.sin(.5*(l+e)),n.scale.x=n.scale.y=2*(Math.sin(.3*(a+e))+1)+2*(Math.sin(.5*(l+e))+1);o.render(s,r),e+=.1},1e3/60)}},mounted:function(){this.initBannerList(),this.liziInit(),Object(s.a)().reveal(".slide-top",{origin:"top",distance:"200px",duration:1e3,reset:!0})}},h={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"banner",staticStyle:{height:"410px"}},[n("el-carousel",{attrs:{width:"100%"}},t._l(t.bannerList,function(i){return 1==i.type?n("el-carousel-item",{key:i.id},[n("img",{attrs:{src:i.pic_url,alt:i.title}}),t._v(" "),n("div",{staticClass:"index slide-top"},[1==i.position_type?n("div",{staticClass:"left"},[n("h1",[t._v(t._s(i.title))]),t._v(" "),n("p",[t._v(t._s(i.sub_title))])]):t._e(),t._v(" "),0===i.position_type?n("div",{staticClass:"center"},[n("h1",[t._v(t._s(i.title))]),t._v(" "),n("p",[t._v(t._s(i.sub_title))])]):t._e(),t._v(" "),2===i.position_type?n("div",{staticClass:"right"},[n("h1",[t._v(t._s(i.title))]),t._v(" "),n("p",[t._v(t._s(i.sub_title))])]):t._e()])]):t._e()})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.bannerList.length,expression:"bannerList.length !== 0"}],staticClass:"indexLizi",attrs:{id:"indexLizi"}})],1)},staticRenderFns:[]};var u=n("VU/8")(c,h,!1,function(t){n("kOgf")},"data-v-d49d27d6",null);i.default=u.exports},"0l2v":function(t,i){},"1wFa":function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("Ka5H"),r={data:function(){return{msg:"Welcome to Your Vue.js App"}},mounted:function(){var t=Object(e.a)();t.reveal(".fade-in",{duration:500,reset:!0}),t.reveal(".scale-in",{scale:.5,duration:500,reset:!0}),t.reveal(".slide-left",{origin:"left",distance:"200px",duration:500,reset:!0}),t.reveal(".slide-top",{origin:"top",distance:"200px",duration:1e3,reset:!1})}},s={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:" advantage"},[n("el-row",{staticClass:"container"},[n("el-col",{attrs:{span:8}},[n("img",{staticClass:"slide-top",staticStyle:{height:"130px"},attrs:{src:"static/images/index/safe.png"}}),t._v(" "),n("h3",[t._v(t._s(t.$t("index.part1")))]),t._v(" "),n("p",[t._v(t._s(t.$t("index.part2")))])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("img",{staticClass:"slide-top",staticStyle:{height:"130px"},attrs:{src:"static/images/index/modal.png",alt:""}}),t._v(" "),n("h3",[t._v(t._s(t.$t("index.part4")))]),t._v(" "),n("p",[t._v(t._s(t.$t("index.part5")))])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("img",{staticClass:"slide-top",staticStyle:{height:"130px"},attrs:{src:"static/images/index/service.png"}}),t._v(" "),n("h3",[t._v(t._s(t.$t("index.part7")))]),t._v(" "),n("p",[t._v(t._s(t.$t("index.part8")))])])],1)],1)},staticRenderFns:[]};var o=n("VU/8")(r,s,!1,function(t){n("+rkW")},"data-v-6bbcab36",null);i.default=o.exports},"6JNV":function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("Gu7T"),r=n.n(e),s=n("gyMJ"),o={data:function(){return{pTop:0,newsList:[]}},computed:{height:function(){return 50*this.newsList.length}},mounted:function(){this.setHeight(),this.initNews()},methods:{setHeight:function(){var t=0,i=this;window.setInterval(function(){t-=50,Math.abs(t)>=i.height&&(t=0),i.pTop=t},4e3)},initNews:function(){var t=this;Object(s.c)({page:1,per_page_num:5}).then(function(i){if(1e3!==i.status)return!1;t.newsList=[].concat(r()(i.data.list))}).catch(function(){})}}},a={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"notice wrapper"},[n("div",{staticClass:"container clearfix"},[n("div",{staticClass:"pull-left notice-icon"},[n("ul",{style:{top:t.pTop+"px"},attrs:{id:"notice"}},t._l(t.newsList,function(i){return n("li",{key:i.id},["zn"===t.$i18n.locale?n("a",{attrs:{href:"https://help.crypto.hkcexp.com/zh-cn/notice"}},[t._v(t._s(i.title))]):t._e(),t._v(" "),"zh-hk"===t.$i18n.locale?n("a",{attrs:{href:"https://help.crypto.hkcexp.com/zh-tw/notice"}},[t._v(t._s(i.title))]):t._e(),t._v(" "),"en"===t.$i18n.locale?n("a",{attrs:{href:"https://help.crypto.hkcexp.com/en-us/notice"}},[t._v(t._s(i.title))]):t._e()])}))]),t._v(" "),n("div",{staticClass:"pull-right notice-more"},["zn"===t.$i18n.locale?n("a",{attrs:{href:"https://help.crypto.hkcexp.com/zh-cn/notice"}},[t._v("MORE :")]):t._e(),t._v(" "),"zh-hk"===t.$i18n.locale?n("a",{attrs:{href:"https://help.crypto.hkcexp.com/zh-tw/notice"}},[t._v("MORE :")]):t._e(),t._v(" "),"en"===t.$i18n.locale?n("a",{attrs:{href:"https://help.crypto.hkcexp.com/en-us/notice"}},[t._v("MORE :")]):t._e()])])])},staticRenderFns:[]};var l=n("VU/8")(o,a,!1,function(t){n("w7GG")},"data-v-c8678f4e",null);i.default=l.exports},"7U6u":function(t,i){},JXTs:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("Qw4y"),r=n("+w35"),s=n("6JNV"),o=n("1wFa"),a=n("2kkd"),l=n("o54l"),c=n("Jsak"),h=n("lu3m"),u={name:"index",components:{oheader:e.default,banner:r.default,news:s.default,describe:o.default,ofooter:a.default,trade:l.default,downloadApp:c.default,recommend:h.default},data:function(){return{pagingX:!0,width:""}}},f={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"index"},[i("oheader"),this._v(" "),i("banner"),this._v(" "),i("news"),this._v(" "),i("recommend"),this._v(" "),i("trade"),this._v(" "),i("describe"),this._v(" "),i("download-app"),this._v(" "),i("ofooter")],1)},staticRenderFns:[]};var d=n("VU/8")(u,f,!1,function(t){n("xda5")},"data-v-40bd6e41",null);i.default=d.exports},Jsak:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("Z1I5"),r=n("gyMJ"),s=n("Ka5H"),o={components:{QrcodeVue:e.a},data:function(){return{ios_link:"",androd_link:"",qrcode_Url:""}},mounted:function(){this.initAppLink();var t=Object(s.a)();t.reveal(".fade-in",{duration:500,reset:!0}),t.reveal(".scale-in",{scale:.5,duration:500,reset:!0}),t.reveal(".slide-left",{origin:"left",distance:"200px",duration:1e3,reset:!1}),t.reveal(".slide-right",{origin:"right",distance:"200px",duration:500,reset:!0})},methods:{initAppLink:function(){var t=this;Object(r.f)().then(function(i){if(1e3!==i.status)return!1;t.ios_link=i.data.ios_link,t.androd_link=i.data.androd_link,"zn"===t.$i18n.locale?t.qrcode_Url=i.data.zh_url:"en"===t.$i18n.locale?t.qrcode_Url=i.data.en_url:t.qrcode_Url=i.data.zhtw_url}).catch(function(){})}}},a={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"multi-platform wrapper"},[n("div",{staticClass:"container clearfix"},[n("img",{staticClass:"pull-left multi-platform-phone slide-left",attrs:{src:"/static/images/index/phone.png",alt:""}}),t._v(" "),n("div",{staticClass:"pull-right multi-platform-des"},[n("h1",[t._v("GCX Wallet")]),t._v(" "),n("h5",[t._v(t._s(t.$t("download.index.part1")))]),t._v(" "),n("p",[n("i"),t._v(t._s(t.$t("download.index.part2")))]),t._v(" "),n("p",[n("i"),t._v(t._s(t.$t("download.index.part3")))]),t._v(" "),n("p",[n("i"),t._v(t._s(t.$t("download.index.part4")))]),t._v(" "),n("div",{staticClass:"code clearfix"},[n("qrcode-vue",{staticClass:"pull-left code-img",attrs:{value:t.qrcode_Url,size:"110",level:"H"}}),t._v(" "),n("div",{staticClass:"pull-left"},[n("a",{staticClass:"android",attrs:{href:t.androd_link}},[n("img",{attrs:{src:"/static/images/index/android.png",alt:""}}),t._v("Android")]),t._v(" "),n("a",{staticClass:"iphone",attrs:{href:t.ios_link}},[n("img",{attrs:{src:"/static/images/index/iphone.png",alt:""}}),t._v("Iphone")])])],1)])])])},staticRenderFns:[]};var l=n("VU/8")(o,a,!1,function(t){n("7U6u")},"data-v-4a5e81b6",null);i.default=l.exports},kOgf:function(t,i){},lu3m:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("Gu7T"),r=n.n(e),s=n("mw3O"),o=n.n(s),a=n("vMJZ"),l=n("oAV5"),c=n("gyMJ"),h={data:function(){return{commendTotal:0,left:0,commendList:[],nextCursor:"pointer",preCursor:"pointer",recommendVisible:!1,userInfo:{},href:Object(l.c)()}},created:function(){this.initRecommend(),this.initUserInfo()},methods:{handleCrossEnvHref:function(t){var i=window.localStorage.getItem("link_userInfo"),n=i?JSON.parse(i).token:"";if(t){var e=this.href,r=t.path,s=o.a.stringify(t.query),a=e+r+(s?"?"+s:"");return n?a=s?a+"&token="+encodeURIComponent(n):a+"?token="+encodeURIComponent(n):a}return n?this.href+"/?token="+encodeURIComponent(n):this.href},initRecommend:function(){var t=this;Object(c.e)().then(function(i){if(1e3!==i.status)return!1;t.commendTotal=i.data.list_total,t.commendList=[].concat(r()(i.data.list_data)),t.commendTotal>4&&(t.recommendVisible=!0)}).catch(function(){})},handlePreCard:function(){this.left<0&&(this.left=this.left+300)},handleNextCard:function(){Math.abs(this.left)<=300*this.commendTotal-600?this.left=this.left-300:this.left=0},initUserInfo:function(){var t=this;window.localStorage.getItem("link_userInfo")&&Object(a.z)().then(function(i){if(1e3!==i.status)return!1;t.userInfo=i.data,0===parseFloat(t.userInfo.is_set_double_certification)&&(t.ruleForm.pass_double="0")}).catch(function(){})},handleTrade:function(t,i){if(!this.userInfo.token)return this.$message({message:"请先登录",duration:1500,type:"warning"}),!1;if(1!==this.userInfo.status)return this.$message({message:this.$t("translateLang.tradeDetail.text71"),duration:1500,type:"warning"}),!1;if("1"!==this.userInfo.is_pwdtrade_exists.toString())return this.$message({message:this.$t("translateLang.tradeDetail.text72"),duration:1500,type:"warning"}),!1;var n=this.handleCrossEnvHref({path:"/sellBuy",query:{ad_id:t,require_type:i}});window.location.href=n},handleScroll:function(t,i){return window.scrollY>i.offsetTop-i.offsetHeight-150&&i.setAttribute("style","opacity: 1; transform: translate3d(0, 10px, 0)"),window.scrollY>i.offsetTop-i.offsetHeight-100}}},u={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.recommendVisible,expression:"recommendVisible"}],staticClass:"recommend"},[n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("translateLang.index.text1")))]),t._v(" "),n("div",{staticClass:"title-tips"},[t._v(t._s(t.$t("translateLang.index.text2")))]),t._v(" "),n("div",{staticClass:"box"},[n("img",{staticClass:"pre",style:{cursor:t.preCursor},attrs:{src:"static/images/pre.png",alt:""},on:{click:function(i){t.handlePreCard()}}}),t._v(" "),n("div",{staticClass:"card-carouse"},[n("ul",{style:{width:300*(t.commendTotal+3)+"px",left:t.left+"px"}},[t._l(t.commendList,function(i){return n("li",{key:i.id},[n("div",{staticClass:"clearfix"},[n("div",{staticClass:"grid-content bg-purple pull-left"},[n("div",{staticClass:"photo-img-container",staticStyle:{display:"inline-block"}},[n("img",{staticClass:"name-short",attrs:{src:i.head_img,alt:""}}),t._v(" "),1==i.is_online_status?n("i",{staticClass:"online-state online-state-green"}):t._e(),0==i.is_online_status?n("i",{staticClass:"online-state online-state-gray"}):t._e()])]),t._v(" "),n("div",{staticClass:"name pull-left"},[t._v(t._s(i.nickname))])]),t._v(" "),n("div",{staticClass:"des"},[n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text3")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(i.trade_count_num))])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text4")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(100*parseFloat(i.thumb_up_rate).toFixed(4))+"%")])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text5")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(i.trade_trust_num))])]),t._v(" "),n("div",{staticClass:"pay-way clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text6")))]),t._l(i.pay_type_list,function(t){return n("img",{key:t.id,staticClass:"pull-right",attrs:{src:t.pay_logo,alt:""}})})],2),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text7")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(i.mix_transaction_price)+"~"+t._s(i.max_transaction_price)+" "+t._s(i.legal_mark))])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text8")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(i.trade_num)+" "+t._s(i.currency_mark))])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text9")))]),n("div",{staticClass:"pull-right"},[n("span",{staticClass:"price"},[t._v(t._s(i.transaction_price)+" ")]),n("span",{staticClass:"price-mark"},[t._v(t._s(i.legal_mark))])])]),t._v(" "),0==i.ad_type?n("el-button",{staticClass:"buy-btn",nativeOn:{click:function(n){t.handleTrade(i.ad_id,i.ad_type)}}},[t._v(t._s(t.$t("translateLang.index.text10"))+" "+t._s(i.currency_mark))]):t._e(),t._v(" "),1==i.ad_type?n("el-button",{staticClass:"sell-btn",nativeOn:{click:function(n){t.handleTrade(i.ad_id,i.ad_type)}}},[t._v(t._s(t.$t("translateLang.index.text11"))+" "+t._s(i.currency_mark))]):t._e()],1)])}),t._v(" "),t._l(t.commendList,function(i,e){return e<3?n("li",{key:i.id},[n("div",{staticClass:"clearfix"},[n("div",{staticClass:"grid-content bg-purple pull-left"},[n("div",{staticClass:"photo-img-container",staticStyle:{display:"inline-block"}},[n("img",{staticClass:"name-short",attrs:{src:i.head_img,alt:""}}),t._v(" "),1==i.is_online_status?n("i",{staticClass:"online-state online-state-green"}):t._e(),0==i.is_online_status?n("i",{staticClass:"online-state online-state-gray"}):t._e()])]),t._v(" "),n("div",{staticClass:"name pull-left"},[t._v(t._s(i.nickname))])]),t._v(" "),n("div",{staticClass:"des"},[n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text3")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(i.trade_count_num))])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text4")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(100*i.thumb_up_rate)+"%")])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text5")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(i.trade_trust_num))])]),t._v(" "),n("div",{staticClass:"pay-way clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text6")))]),t._l(i.pay_type_list,function(t){return n("img",{key:t.id,staticClass:"pull-right",attrs:{src:t.pay_logo,alt:""}})})],2),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text7")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(i.mix_transaction_price)+"~"+t._s(i.max_transaction_price)+" "+t._s(i.legal_mark))])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text8")))]),n("div",{staticClass:"pull-right"},[t._v(t._s(i.trade_num)+" "+t._s(i.currency_mark))])]),t._v(" "),n("div",{staticClass:"clearfix"},[n("div",{staticClass:"pull-left"},[t._v(t._s(t.$t("translateLang.index.text9")))]),n("div",{staticClass:"pull-right"},[n("span",{staticClass:"price"},[t._v(t._s(i.transaction_price)+" ")]),n("span",{staticClass:"price-mark"},[t._v(t._s(i.legal_mark))])])]),t._v(" "),0==i.ad_type?n("el-button",{staticClass:"buy-btn",nativeOn:{click:function(n){t.handleTrade(i.ad_id,i.ad_type)}}},[t._v(t._s(t.$t("translateLang.index.text10"))+" "+t._s(i.currency_mark))]):t._e(),t._v(" "),1==i.ad_type?n("el-button",{staticClass:"sell-btn",nativeOn:{click:function(n){t.handleTrade(i.ad_id,i.ad_type)}}},[t._v(t._s(t.$t("translateLang.index.text11"))+" "+t._s(i.currency_mark))]):t._e()],1)]):t._e()})],2)]),t._v(" "),n("img",{staticClass:"next",style:{cursor:t.nextCursor},attrs:{src:"static/images/next.png",alt:""},on:{click:function(i){t.handleNextCard()}}})])])])},staticRenderFns:[]};var f=n("VU/8")(h,u,!1,function(t){n("0l2v")},"data-v-6188ed76",null);i.default=f.exports},w7GG:function(t,i){},xda5:function(t,i){}});