webpackJsonp([8],{OkoY:function(e,t){},gwn6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("Dd8w"),o=i.n(r),s=i("UK/b"),a=i("vMJZ"),n=i("E4LH"),l={components:{imgCode:i("JLiW").a},props:["dialogVisible"],data:function(){var e=this;return{host:window.location.host,phoneForm:{sms_verify:"",user_account:"",require_type:1},phoneFormRules:{sms_verify:[{required:!0,message:this.$t("errorTips.withoutVerifyCode"),trigger:"blur"}],captcha:[{required:!0,message:this.$t("errorTips.withoutVerifyCode"),trigger:"blur"}],user_account:[{required:!0,validator:function(t,i,r){""===i?r(new Error(e.$t("errorTips.withoutEmail"))):Object(n.a)(i)?r():r(new Error(e.$t("errorTips.emailFormat")))},trigger:"blur"}]},validCode:!0,validTip:this.$t("verifyCode.title")}},computed:{},created:function(){},methods:{handleCloseDialog:function(){this.$emit("closeDialog","bindEmailDialogVisible")},phoneSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var i=o()({},t.phoneForm);Object(a.r)(i).then(function(e){if(1e3!==e.status)return t.$message.error(e.msg),!1;t.$message.success(t.$t("errorTips.bindEmailSuccess")),t.$emit("getUserInfo"),t.handleCloseDialog()}).catch(function(){})})},handleSendRequestSms:function(e){var t=this;if(!this.phoneForm.user_account)return this.$message.error(this.$t("errorTips.withoutEmail")),!1;if(!Object(n.a)(this.phoneForm.user_account))return this.$message.error(this.$t("errorTips.emailFormat")),!1;var i={};this.setTime(),i.user_account=this.phoneForm.user_account,i.request_type="edit",Object(s.d)(i).then(function(e){if(1e3!==e.status)return t.$message.error(e.msg),!1}).catch(function(){})},setTime:function(){var e=60;if(this.validCode){this.validCode=!1;var t=this,i=setInterval(function(){e--,t.validTip=e+t.$t("verifyCode.second"),0===e&&(clearInterval(i),t.validTip=t.$t("verifyCode.getAgain"),t.validCode=!0)},1e3);return i}}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"mdphone-dialog",attrs:{title:e.$t("user.bindEmailDialog.title"),visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleCloseDialog,width:"580px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"phoneForm",attrs:{model:e.phoneForm,rules:e.phoneFormRules,"label-width":"180px"}},[i("el-form-item",{attrs:{label:e.$t("user.bindEmailDialog.email"),prop:"user_account"}},[i("el-input",{attrs:{placeholder:""},model:{value:e.phoneForm.user_account,callback:function(t){e.$set(e.phoneForm,"user_account","string"==typeof t?t.trim():t)},expression:"phoneForm.user_account"}})],1),e._v(" "),i("el-form-item",{staticClass:"img-code-container",attrs:{label:e.$t("translateLang.user.text1"),prop:"captcha",mes:""}},[i("el-input",{model:{value:e.phoneForm.captcha,callback:function(t){e.$set(e.phoneForm,"captcha","string"==typeof t?t.trim():t)},expression:"phoneForm.captcha"}}),e._v(" "),e.host.indexOf("hkcexp")>-1?i("img-code",{attrs:{url:"https://crypto.hkcexp.com/api/Login/captchaVerify"}}):i("img-code",{attrs:{url:"http://192.169.1.210:7569/api/Login/captchaVerify"}})],1),e._v(" "),i("el-form-item",{staticClass:"verify",attrs:{label:e.$t("user.bindEmailDialog.code"),prop:"sms_verify"}},[i("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.phoneForm.sms_verify,callback:function(t){e.$set(e.phoneForm,"sms_verify","string"==typeof t?t.trim():t)},expression:"phoneForm.sms_verify"}}),e._v(" "),i("el-button",{staticClass:"get-verify",attrs:{disabled:!e.validCode},on:{click:function(t){e.handleSendRequestSms(t)}}},[e._v(e._s(e.validTip))])],1),e._v(" "),i("div",{staticClass:"btn-group appeal-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.phoneSubmit("phoneForm")}}},[e._v(e._s(e.$t("dialog.sure")))])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(l,c,!1,function(e){i("qQvr"),i("OkoY"),i("t1uv")},"data-v-da3ff686",null);t.default=u.exports},qQvr:function(e,t){},t1uv:function(e,t){}});