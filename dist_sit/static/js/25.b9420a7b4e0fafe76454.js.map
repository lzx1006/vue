{"version":3,"sources":["webpack:///src/views/tradeDetail/components/sellForm.vue","webpack:///./src/views/tradeDetail/components/sellForm.vue?939e","webpack:///./src/views/tradeDetail/components/sellForm.vue"],"names":["props","components","passwordDialog","data","_this","this","isToCnyHidden","trade_currency_name","isDisable","slideData","userInfo","tips","$t","dialogVisible","ruleForm","sell_price","sell_num","trade_password","pass_double","rules","validator","rule","value","callback","Error","test","parseFloat","tradeInfo","currency_sell_balance","last_sell_price","computed","toCny","exchange_cny_price","toFixed","toHkb","exchange_hkd_price","toUsb","exchange_usd_price","convert","Math","floor","percent","watch","created","initUserInfo","$store","state","isLogin","methods","closeDialog","str","_this2","window","localStorage","getItem","Object","user","then","res","status","is_set_double_certification","catch","submitForm","formName","_this3","$refs","validate","valid","$message","error","is_pwdtrade_exists","toString","changeByPrice","buy_price","last_buy_price","submitData","_this4","extends_default","currency_id","trade_area_id","md5_default","price_type","isSurePrice","trade","msg","resetForm","$emit","success","changeByRange","num","isFinite","match","changeByNum","resetFields","components_sellForm","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","currency_mark","ref","attrs","model","prop","label","placeholder","disabled","on","input","$event","$$v","$set","trim","expression","$i18n","locale","class","hidden","_e","staticStyle","width","display","trade_currency_mark","currency_sell_fee","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","sellForm","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/25.b9420a7b4e0fafe76454.js","sourcesContent":["<template>\r\n  <div class=\"sell-form\">\r\n    <div class=\"title-second\">{{ $t('tradeDetail.sell.part2') }} {{ tradeInfo.currency_mark }}： <span class=\"c-red\">{{ tradeInfo.currency_sell_balance }}</span></div>\r\n    <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"demo-ruleForm\">\r\n      <el-form-item  prop=\"sell_price\" class=\"to-cny-container\" :label=\"$t('translateLang.tradeDetail.text47')\" v-if=\"isSurePrice == 0\">\r\n        <el-input v-model.trim=\"ruleForm.sell_price\" :placeholder=\"$t('tradeDetail.sell.part4')\" @input=\"changeByPrice()\" :disabled=\"isDisable\"></el-input>\r\n        <span v-if=\"$i18n.locale == 'zn'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ {{ toCny }} CNY</span>\r\n        <span v-if=\"$i18n.locale == 'zh-hk'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ HK$ {{ toHkb }} </span>\r\n        <span v-if=\"$i18n.locale == 'en'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ $ {{ toUsb }}</span>\r\n      </el-form-item> \r\n      <el-form-item  prop=\"buy_price\" class=\"to-cny-container\" :label=\"$t('translateLang.tradeDetail.text47')\" v-if=\"isSurePrice == 1\">\r\n        <el-input v-model=\"tips\" @input=\"changeByPrice()\" disabled></el-input>\r\n        <span v-if=\"$i18n.locale == 'zn'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ {{ toCny }} CNY</span>\r\n        <span  v-if=\"$i18n.locale == 'zh-hk'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ HK$ {{ toHkb }}</span>\r\n        <span  v-if=\"$i18n.locale == 'en'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ $ {{ toUsb }}</span>\r\n      </el-form-item> \r\n      <el-form-item  prop=\"sell_num\" :label=\"$t('translateLang.tradeDetail.text48')\">\r\n        <el-input v-model.trim=\"ruleForm.sell_num\" :placeholder=\"$t('tradeDetail.sell.part6')\"  :disabled=\"isDisable\"></el-input>\r\n      </el-form-item>\r\n      <div  class=\"clearfix\">\r\n        <el-slider v-model=\"slideData\" class=\"pull-left slider\" @input=\"changeByRange()\"></el-slider>\r\n      </div>\r\n      <div class=\"toComputed\"><span style=\"width:60px;display:inline-block;\">{{ $t('translateLang.tradeDetail.text3') }}</span>  {{ convert }}{{ tradeInfo.trade_currency_mark }} <span class=\"c-gray\">({{ $t('tradeDetail.sell.part9') }}{{ tradeInfo.currency_sell_fee }}%)</span></div>\r\n      <!-- <el-form-item  prop=\"trade_password\">\r\n        <el-input v-model.trim=\"ruleForm.trade_password\" type=\"password\" :placeholder=\"$t('tradeDetail.sell.part19')\" :disabled=\"isDisable\"></el-input>\r\n      </el-form-item> -->\r\n      <!-- <el-form-item  prop=\"pass_double\" v-if=\"parseFloat(userInfo.is_set_double_certification) != 0\">\r\n        <el-input v-model.trim=\"ruleForm.pass_double\" :placeholder=\"$t('tradeDetail.sell.part20')\" :disabled=\"isDisable\"></el-input>\r\n      </el-form-item> -->\r\n      <el-form-item>\r\n        <el-button @click=\"submitForm('ruleForm')\" class=\"sell-btn1\" :disabled=\"isDisable\">{{ $t('tradeDetail.sell.part10') }}</el-button>\r\n      </el-form-item>\r\n      \r\n    </el-form>\r\n    <password-dialog :dialogVisible=\"dialogVisible\" @submitData=\"submitData\" @closeDialog=\"closeDialog\"></password-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import md5 from 'js-md5'\r\n  import { userInfo } from '@/api/user'\r\n  import { tradeSellOption } from '@/api/trade'\r\n  import passwordDialog from './passwordDialog'\r\n  export default {\r\n    props: ['isLogin', 'tradeInfo', 'isSurePrice'],\r\n    components: { passwordDialog },\r\n    data() {\r\n      var validatePass = (rule, value, callback) => {\r\n        if (value === '') {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('translateLang.tradeDetail.text78')))\r\n        } else if (value === '0') {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('translateLang.tradeDetail.text79')))\r\n        } else if (!(/^[0-9]([0-9]|\\.)*$/.test(value))) {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('tradeDetail.sell.part13')))\r\n        } else if (value > parseFloat(this.tradeInfo.currency_sell_balance)) {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('tradeDetail.sell.part14')))\r\n        } else if (!(parseFloat(this.ruleForm.sell_price) > this.tradeInfo.last_sell_price * 0.9)) {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('translateLang.tradeDetail.text50')))\r\n        } else {\r\n          callback()\r\n        }\r\n      }\r\n      var validatePass1 = (rule, value, callback) => {\r\n        if (value === '') {\r\n          this.isToCnyHidden = true\r\n          callback(new Error('卖出量不能为空'))\r\n        } else if (value === '0') {\r\n          this.isToCnyHidden = true\r\n          callback(new Error('卖出量不能为0'))\r\n        } else if (!(/^[0-9]([0-9]|\\.)*$/.test(value))) {\r\n          callback(new Error(this.$t('tradeDetail.sell.part16')))\r\n        } else if (value > parseFloat(this.tradeInfo.currency_sell_balance)) {\r\n          callback(new Error(this.$t('tradeDetail.sell.part17')))\r\n        } else {\r\n          callback()\r\n        }\r\n      }\r\n      return {\r\n        isToCnyHidden: false,\r\n        trade_currency_name: '',\r\n        isDisable: true,\r\n        slideData: 0,\r\n        userInfo: {},\r\n        tips: this.$t('translateLang.tradeDetail.text49'),\r\n        dialogVisible: false,\r\n        ruleForm: {\r\n          sell_price: 0,\r\n          sell_num: 0,\r\n          trade_password: '',\r\n          pass_double: ''\r\n        },\r\n        rules: {\r\n          sell_price: [\r\n            { validator: validatePass }\r\n          ],\r\n          sell_num: [\r\n            // { required: true, message: this.$t('tradeDetail.sell.part12') },\r\n            { validator: validatePass1 }\r\n          ]\r\n          // trade_password: [\r\n          //   { required: true, message: this.$t('errorTips.noTradePwd') }\r\n          // ]\r\n          // pass_double: [\r\n          //   { required: true, required: true, message: this.$t('errorTips.noGoogleCode') }\r\n          // ]\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      // mostBy: function() {\r\n      //   return (parseFloat(this.tradeInfo.currency_sell_balance) / parseFloat(this.ruleForm.sell_price)).toFixed(2)\r\n      // },\r\n      toCny: function() {\r\n        return (this.tradeInfo.exchange_cny_price * this.ruleForm.sell_price).toFixed(2)\r\n      },\r\n      toHkb() {\r\n        return (this.tradeInfo.exchange_hkd_price * this.ruleForm.sell_price).toFixed(2)\r\n      },\r\n      toUsb() {\r\n        return (this.tradeInfo.exchange_usd_price * this.ruleForm.sell_price).toFixed(2)\r\n      },\r\n      convert: function() {\r\n        return Math.floor(this.ruleForm.sell_price * this.ruleForm.sell_num * 100000) / 100000\r\n      },\r\n      percent: function() {\r\n        if (parseFloat(this.ruleForm.sell_num) / parseFloat(this.tradeInfo.currency_sell_balance) <= 1) {\r\n          return (parseFloat(this.ruleForm.sell_num) / parseFloat(this.tradeInfo.currency_sell_balance)).toFixed(3)\r\n        } else {\r\n          return 0\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      tradeInfo: function() {\r\n        this.ruleForm.sell_price = this.tradeInfo.last_sell_price\r\n        console.log(this.tradeInfo)\r\n      }\r\n    },\r\n    created() {\r\n      this.initUserInfo()\r\n      this.ruleForm.sell_price = this.tradeInfo.last_sell_price\r\n      this.trade_currency_name = this.$store.state.trade_currency_name\r\n      if (this.isLogin) {\r\n        this.isDisable = false\r\n      } else {\r\n        this.isDisable = true\r\n      }\r\n    },\r\n    methods: {\r\n      closeDialog(str) {\r\n        this[str] = false\r\n      },\r\n      initUserInfo() {\r\n        if (window.localStorage.getItem('link_userInfo')) {\r\n          userInfo().then(res => {\r\n            if (res.status !== 1000) {\r\n              return false\r\n            }\r\n            this.userInfo = res.data\r\n            if (parseFloat(this.userInfo.is_set_double_certification) === 0) {\r\n              this.ruleForm.pass_double = '0'\r\n            }\r\n          }).catch(() => {\r\n          })\r\n        }\r\n      },\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (this.userInfo.status !== 1) {\r\n            this.$message.error(this.$t('translateLang.tradeDetail.text71'))\r\n            return false\r\n          }\r\n          if ((this.userInfo.is_pwdtrade_exists).toString() !== '1') {\r\n            this.$message.error(this.$t('translateLang.tradeDetail.text72'))\r\n            return false\r\n          }\r\n          if (valid) {\r\n            this.dialogVisible = true\r\n          } else {\r\n            this.changeByPrice()\r\n            if (!(parseFloat(this.ruleForm.buy_price) < this.tradeInfo.last_buy_price * 1.1)) {\r\n              this.isToCnyHidden = true\r\n            }\r\n            console.log('error submit!!')\r\n            return false\r\n          }\r\n        })\r\n      },\r\n      submitData(trade_password) {\r\n        const data = { ...this.ruleForm }\r\n        data.currency_id = this.tradeInfo.currency_id\r\n        data.trade_area_id = this.tradeInfo.trade_area_id\r\n        data.trade_password = md5(trade_password)\r\n        data.price_type = this.isSurePrice ? 1 : 2\r\n  \r\n        this.dialogVisible = false\r\n        tradeSellOption(data).then(res => {\r\n          if (res.status !== 1000) {\r\n            this.$message.error(res.msg)\r\n            return false\r\n          }\r\n\r\n          this.resetForm('ruleForm')\r\n          this.$emit('refresh')\r\n          this.$message.success(this.$t('tradeDetail.sell.part18'))\r\n        }).catch(() => {\r\n        })\r\n      },\r\n      changeByRange() {\r\n        if (!this.ruleForm.sell_price) {\r\n          this.slideData = 0\r\n          return false\r\n        }\r\n        console.log(this.ruleForm.sell_price)\r\n        const num = parseFloat(this.tradeInfo.currency_sell_balance)\r\n        let sell_num = num * this.slideData / 100\r\n        if (!isFinite(num)) {\r\n          sell_num = 0\r\n        }\r\n        if (sell_num !== 0) { this.ruleForm.sell_num = Math.floor(sell_num * 100000) / 100000 } else {\r\n          this.ruleForm.sell_num = 0\r\n        }\r\n      },\r\n      changeByPrice() {\r\n        if (/.{1}/.test(this.ruleForm.sell_price)) {\r\n          this.isToCnyHidden = false\r\n          if (!(/^[0-9]*.[0-9]{0,6}$/).test(this.ruleForm.sell_price)) {\r\n            // this.ruleForm.sell_price = this.ruleForm.sell_price.match(/^[0-9]*.[0-9]{0,5}/)\r\n            this.ruleForm.sell_price = this.ruleForm.sell_price.match(/^[0-9]*.[0-9]{0,5}/)[0]\r\n          }\r\n        } else {\r\n          this.isToCnyHidden = true\r\n        }\r\n\r\n        if (!parseFloat(this.ruleForm.sell_price)) {\r\n          this.isToCnyHidden = true\r\n          return false\r\n        }\r\n        if (!(/^[0-9]([0-9]|\\.)*$/.test(this.ruleForm.sell_price))) {\r\n          this.isToCnyHidden = true\r\n          return false\r\n        }\r\n        if (this.ruleForm.sell_price > parseFloat(this.tradeInfo.currency_sell_balance)) {\r\n          this.isToCnyHidden = true\r\n          return false\r\n        }\r\n        if (this.percent <= 1) {\r\n          this.slideData = parseFloat(this.percent) * 100\r\n        } else {\r\n          this.slideData = 0\r\n        }\r\n  \r\n        // this.ruleForm.currency_amount = (this.ruleForm.legal_money_amount / this.detailData.quote_price).toFixed(5)\r\n      },\r\n      changeByNum() {\r\n        if (/.{1}/.test(this.ruleForm.sell_num)) {\r\n          if (!(/^[0-9]*.[0-9]{0,2}$/).test(this.ruleForm.sell_num)) {\r\n            // this.ruleForm.sell_price = this.ruleForm.sell_price.match(/^[0-9]*.[0-9]{0,5}/)\r\n            this.ruleForm.sell_num = this.ruleForm.sell_num.match(/^[0-9]*.[0-9]{0,1}/)[0]\r\n          }\r\n        }\r\n        if (this.percent <= 1) {\r\n          this.slideData = parseFloat(this.percent) * 100\r\n        } else {\r\n          this.slideData = 0\r\n        }\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped lang=\"less\">\r\n  .sell-form {\r\n    font-size: 12px;\r\n    padding: 0 13px;\r\n    color: #61626a;\r\n    position: relative;\r\n    h3{\r\n      font-size: 14px;\r\n      margin: 7px 0;\r\n      font-weight: normal;\r\n    }\r\n    .title-second{\r\n      line-height: 28px;\r\n      margin-bottom: 5px;\r\n    }\r\n    .to-cny {\r\n      position: absolute;\r\n      color: #fff;\r\n      font-size: 12px;\r\n      line-height: 30px;\r\n      height: 30px;\r\n      color: #61688a;\r\n      top: 40px;\r\n      padding-left: 15px;\r\n    }\r\n    .slider{\r\n      width: 100%;\r\n      display: inline-block;\r\n    }\r\n    .best{\r\n      position: absolute;\r\n      right: 5px;\r\n      top: 0;\r\n      z-index: 99;\r\n      font-size: 12px;\r\n      color: #fff;\r\n    }\r\n    .toComputed{\r\n      margin: 10px 0 16px;\r\n    }\r\n    \r\n  }\r\n</style>\r\n<style lang=\"less\">\r\n.sell-form{\r\n  input::-webkit-input-placeholder{\r\n        color:#61636f !important;\r\n    }\r\n    input::-moz-placeholder{   /* Mozilla Firefox 19+ */\r\n        color:#61636f !important;\r\n    }\r\n    input:-moz-placeholder{    /* Mozilla Firefox 4 to 18 */\r\n        color:#61636f !important;\r\n    }\r\n    input:-ms-input-placeholder{  /* Internet Explorer 10-11 */ \r\n        color:#61636f !important;\r\n    }\r\n    .el-input .el-input__inner{\r\n      background-color: #191b2b;\r\n      border-color: #303c56;\r\n      color: #fff;\r\n      font-size: 12px;\r\n    }\r\n    .c-white{\r\n      color: white;\r\n    }\r\n    .c-gray{\r\n      color: #61626a;\r\n    }\r\n    .to-cny-container{\r\n      position: relative;\r\n      margin-bottom: 30px;\r\n    }\r\n    .el-slider__runway{\r\n      margin: 7px 0 20px 0;\r\n      height: 4px !important;\r\n      background-color: #343645 !important;\r\n    }\r\n    .sell-btn1,\r\n    .sell-btn1.is-disabled\r\n    .sell-btn1.focus, .sell-btn1:focus, .sell-btn1:hover{\r\n      width: 100% !important;\r\n      background: #ff5b5c !important;\r\n      border: 1px solid #ff5b5c !important;\r\n      color: white !important;\r\n    }\r\n  // 新增\r\n  .el-form-item__label{\r\n    width: 60px;\r\n    text-align: left;\r\n    font-size: 12px;\r\n  }\r\n  .el-input{\r\n    width: calc(100% - 60px);\r\n  }\r\n   .to-cny{\r\n    left: 60px;\r\n    width: calc(100% - 75px);\r\n  }\r\n   .el-slider__runway.disabled .el-slider__button{\r\n    left: 13px;\r\n  }\r\n  .el-form-item__error{\r\n    left: 60px;\r\n  }\r\n  .el-form-item.is-required:not(.is-no-asterisk)>.el-form-item__label:before{\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/tradeDetail/components/sellForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sell-form\"},[_c('div',{staticClass:\"title-second\"},[_vm._v(_vm._s(_vm.$t('tradeDetail.sell.part2'))+\" \"+_vm._s(_vm.tradeInfo.currency_mark)+\"： \"),_c('span',{staticClass:\"c-red\"},[_vm._v(_vm._s(_vm.tradeInfo.currency_sell_balance))])]),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules}},[(_vm.isSurePrice == 0)?_c('el-form-item',{staticClass:\"to-cny-container\",attrs:{\"prop\":\"sell_price\",\"label\":_vm.$t('translateLang.tradeDetail.text47')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('tradeDetail.sell.part4'),\"disabled\":_vm.isDisable},on:{\"input\":function($event){_vm.changeByPrice()}},model:{value:(_vm.ruleForm.sell_price),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"sell_price\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.sell_price\"}}),_vm._v(\" \"),(_vm.$i18n.locale == 'zn')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ \"+_vm._s(_vm.toCny)+\" CNY\")]):_vm._e(),_vm._v(\" \"),(_vm.$i18n.locale == 'zh-hk')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ HK$ \"+_vm._s(_vm.toHkb)+\" \")]):_vm._e(),_vm._v(\" \"),(_vm.$i18n.locale == 'en')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ $ \"+_vm._s(_vm.toUsb))]):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.isSurePrice == 1)?_c('el-form-item',{staticClass:\"to-cny-container\",attrs:{\"prop\":\"buy_price\",\"label\":_vm.$t('translateLang.tradeDetail.text47')}},[_c('el-input',{attrs:{\"disabled\":\"\"},on:{\"input\":function($event){_vm.changeByPrice()}},model:{value:(_vm.tips),callback:function ($$v) {_vm.tips=$$v},expression:\"tips\"}}),_vm._v(\" \"),(_vm.$i18n.locale == 'zn')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ \"+_vm._s(_vm.toCny)+\" CNY\")]):_vm._e(),_vm._v(\" \"),(_vm.$i18n.locale == 'zh-hk')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ HK$ \"+_vm._s(_vm.toHkb))]):_vm._e(),_vm._v(\" \"),(_vm.$i18n.locale == 'en')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ $ \"+_vm._s(_vm.toUsb))]):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"sell_num\",\"label\":_vm.$t('translateLang.tradeDetail.text48')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('tradeDetail.sell.part6'),\"disabled\":_vm.isDisable},model:{value:(_vm.ruleForm.sell_num),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"sell_num\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.sell_num\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"clearfix\"},[_c('el-slider',{staticClass:\"pull-left slider\",on:{\"input\":function($event){_vm.changeByRange()}},model:{value:(_vm.slideData),callback:function ($$v) {_vm.slideData=$$v},expression:\"slideData\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"toComputed\"},[_c('span',{staticStyle:{\"width\":\"60px\",\"display\":\"inline-block\"}},[_vm._v(_vm._s(_vm.$t('translateLang.tradeDetail.text3')))]),_vm._v(\"  \"+_vm._s(_vm.convert)+_vm._s(_vm.tradeInfo.trade_currency_mark)+\" \"),_c('span',{staticClass:\"c-gray\"},[_vm._v(\"(\"+_vm._s(_vm.$t('tradeDetail.sell.part9'))+_vm._s(_vm.tradeInfo.currency_sell_fee)+\"%)\")])]),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticClass:\"sell-btn1\",attrs:{\"disabled\":_vm.isDisable},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}},[_vm._v(_vm._s(_vm.$t('tradeDetail.sell.part10')))])],1)],1),_vm._v(\" \"),_c('password-dialog',{attrs:{\"dialogVisible\":_vm.dialogVisible},on:{\"submitData\":_vm.submitData,\"closeDialog\":_vm.closeDialog}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-79c80bef\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/tradeDetail/components/sellForm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-79c80bef\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./sellForm.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-79c80bef\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./sellForm.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sellForm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sellForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-79c80bef\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./sellForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-79c80bef\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/tradeDetail/components/sellForm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}