{"version":3,"sources":["webpack:///src/views/tradeDetail/components/buyForm.vue","webpack:///./src/views/tradeDetail/components/buyForm.vue?f998","webpack:///./src/views/tradeDetail/components/buyForm.vue"],"names":["props","components","passwordDialog","data","_this","this","isToCnyHidden","trade_currency_name","isDisable","slideData","load","tips","$t","dialogVisible","userInfo","ruleForm","buy_price","buy_num","trade_password","pass_double","rules","validator","rule","value","callback","Error","test","parseFloat","tradeInfo","currency_buy_balance","last_buy_price","mostBy","computed","Math","floor","toCny","exchange_cny_price","toFixed","toHkb","exchange_hkd_price","toUsb","exchange_usd_price","convert","percent","watch","created","initUserInfo","$store","state","isLogin","methods","closeDialog","str","_this2","window","localStorage","getItem","Object","user","then","res","status","is_set_double_certification","catch","submitForm","formName","_this3","$message","error","is_pwdtrade_exists","toString","$refs","validate","valid","changeByPrice","submitData","_this4","extends_default","currency_id","trade_area_id","md5_default","price_type","isSurePrice","trade","msg","resetForm","$emit","success","match","changeByRange","num","isFinite","changeByNum","resetFields","components_buyForm","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","trade_currency_mark","ref","attrs","model","prop","label","placeholder","disabled","on","input","$event","$$v","$set","trim","expression","$i18n","locale","class","hidden","_e","type","target","currentTarget","staticStyle","width","display","currency_buy_fee","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","buyForm","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/32.e45b9379eaa69111408c.js","sourcesContent":["<template>\r\n  <div class=\"buy-form\">\r\n    <div class=\"title-second\">{{ $t('tradeDetail.buy.part2') }} {{ tradeInfo.trade_currency_mark }}： <span class=\"c-green\">{{ tradeInfo.currency_buy_balance }}</span></div>\r\n    <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"demo-ruleForm\">\r\n      <el-form-item  prop=\"buy_price\" class=\"to-cny-container\" :label=\"$t('translateLang.tradeDetail.text1')\" v-if=\"isSurePrice == 0\" >\r\n        <el-input v-model.trim=\"ruleForm.buy_price\" :placeholder=\"$t('tradeDetail.buy.part4')\" @input=\"changeByPrice()\" :disabled=\"isDisable\"></el-input>\r\n        <span v-if=\"$i18n.locale == 'zn'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ {{ toCny }} CNY</span>\r\n        <span v-if=\"$i18n.locale == 'zh-hk'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ HK$ {{ toHkb }} </span>\r\n        <span v-if=\"$i18n.locale == 'en'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ $ {{ toUsb }}</span>\r\n      </el-form-item> \r\n      <el-form-item  prop=\"buy_price\" class=\"to-cny-container\" :label=\"$t('translateLang.tradeDetail.text1')\" v-if=\"isSurePrice == 1\">\r\n        <el-input v-model=\"tips\" @input=\"changeByPrice()\" disabled></el-input>\r\n        <span v-if=\"$i18n.locale == 'zn'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ {{ toCny }} CNY</span>\r\n        <span  v-if=\"$i18n.locale == 'zh-hk'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ HK$ {{ toHkb }}</span>\r\n        <span  v-if=\"$i18n.locale == 'en'\" class=\"to-cny\" :class=\"{ 'hidden': isToCnyHidden }\"> ≈ $ {{ toUsb }}</span>\r\n      </el-form-item> \r\n      <el-form-item  prop=\"buy_num\" :label=\"$t('translateLang.tradeDetail.text2')\" >\r\n        <el-input v-model.trim=\"ruleForm.buy_num\"  type=\"number\" :placeholder=\"$t('tradeDetail.buy.part6')\"  :disabled=\"isDisable\"></el-input>\r\n      </el-form-item>\r\n      <div  class=\"clearfix\">\r\n        <el-slider v-model=\"slideData\" class=\"pull-left slider\" @input.self=\"changeByRange()\"></el-slider>\r\n      </div>\r\n      <div class=\"toComputed\">\r\n        <span style=\"width:60px;display:inline-block;\">\r\n          {{ $t('translateLang.tradeDetail.text3') }}\r\n        </span>\r\n          {{ convert }}{{ tradeInfo.trade_currency_mark }} \r\n        <span class=\"c-gray\">({{ $t('tradeDetail.buy.part9') }}{{ tradeInfo.currency_buy_fee }}%)</span>\r\n      </div>\r\n      <!-- <el-form-item  prop=\"trade_password\">\r\n        <el-input v-model.trim=\"ruleForm.trade_password\" type=\"password\" :placeholder=\"$t('tradeDetail.buy.part19')\" :disabled=\"isDisable\"></el-input>\r\n      </el-form-item> -->\r\n      <!-- <el-form-item  prop=\"pass_double\" v-if=\"parseFloat(userInfo.is_set_double_certification) != 0\">\r\n        <el-input v-model.trim=\"ruleForm.pass_double\" :placeholder=\"$t('tradeDetail.buy.part20')\" :disabled=\"isDisable\"></el-input>\r\n      </el-form-item> -->\r\n      <el-form-item>\r\n        <el-button @click=\"submitForm('ruleForm')\" class=\"buy-btn1\" :disabled=\"isDisable\">{{ $t('tradeDetail.buy.part10') }}</el-button>\r\n      </el-form-item>\r\n      \r\n    </el-form>\r\n    <password-dialog :dialogVisible=\"dialogVisible\" @submitData=\"submitData\" @closeDialog=\"closeDialog\"></password-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import md5 from 'js-md5'\r\n  import { userInfo } from '@/api/user'\r\n  import { tradeBuyOption } from '@/api/trade'\r\n  \r\n  import passwordDialog from './passwordDialog'\r\n  export default {\r\n    props: ['isLogin', 'tradeInfo', 'isSurePrice'],\r\n    components: { passwordDialog },\r\n    data() {\r\n      var validatePass = (rule, value, callback) => {\r\n        if (value === '') {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('translateLang.tradeDetail.text76')))\r\n        } else if (value === '0' || value === 0) {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('translateLang.tradeDetail.text77')))\r\n        } else if (!(/^[0-9]([0-9]|\\.)*$/.test(value))) {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('tradeDetail.buy.part13')))\r\n        } else if (value > parseFloat(this.tradeInfo.currency_buy_balance)) {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('tradeDetail.buy.part14')))\r\n        } else if (!(parseFloat(this.ruleForm.buy_price) < this.tradeInfo.last_buy_price * 1.1)) {\r\n          this.isToCnyHidden = true\r\n          callback(new Error(this.$t('translateLang.tradeDetail.text8')))\r\n        } else {\r\n          callback()\r\n        }\r\n      }\r\n      var validatePass1 = (rule, value, callback) => {\r\n        if (value === '' || value === '0' || value === 0) {\r\n          callback(new Error(this.$t('tradeDetail.buy.part15')))\r\n        } else if (!(/^[0-9]([0-9]|\\.)*$/.test(value))) {\r\n          callback(new Error(this.$t('tradeDetail.buy.part16')))\r\n        } else if (value > parseFloat(this.mostBy)) {\r\n          callback(new Error(this.$t('tradeDetail.buy.part17')))\r\n        } else {\r\n          callback()\r\n        }\r\n      }\r\n      return {\r\n        isToCnyHidden: false,\r\n        trade_currency_name: '',\r\n        isDisable: true,\r\n        slideData: 0,\r\n        load: 1,\r\n        tips: this.$t('translateLang.tradeDetail.text7'),\r\n        dialogVisible: false,\r\n        userInfo: {},\r\n        ruleForm: {\r\n          buy_price: 0,\r\n          buy_num: 0,\r\n          trade_password: '',\r\n          pass_double: ''\r\n        },\r\n        rules: {\r\n          buy_price: [\r\n            { validator: validatePass }\r\n          ],\r\n          buy_num: [\r\n            { validator: validatePass1 }\r\n          ]\r\n          // trade_password: [\r\n          //   { required: true, message: this.$t('errorTips.noTradePwd') }\r\n          // ]\r\n          // pass_double: [\r\n          //   { required: true, required: true, message: this.$t('errorTips.noGoogleCode') }\r\n          // ]\r\n        }\r\n      }\r\n    },\r\n  \r\n    computed: {\r\n      mostBy: function() {\r\n        if (this.ruleForm.buy_price === 0 || this.ruleForm.buy_price === '') {\r\n          return 0\r\n        } else {\r\n          console.log(this.tradeInfo.currency_buy_balance)\r\n          console.log(this.ruleForm.buy_price)\r\n          return Math.floor(parseFloat(this.tradeInfo.currency_buy_balance) / parseFloat(this.ruleForm.buy_price) * 100000) / 100000\r\n        }\r\n      },\r\n      toCny: function() {\r\n        return (this.tradeInfo.exchange_cny_price * this.ruleForm.buy_price).toFixed(2)\r\n      },\r\n      toHkb() {\r\n        return (this.tradeInfo.exchange_hkd_price * this.ruleForm.buy_price).toFixed(2)\r\n      },\r\n      toUsb() {\r\n        return (this.tradeInfo.exchange_usd_price * this.ruleForm.buy_price).toFixed(2)\r\n      },\r\n      convert: function() {\r\n        return Math.floor(this.ruleForm.buy_price * this.ruleForm.buy_num * 100000) / 100000\r\n      },\r\n      percent: function() {\r\n        if (this.ruleForm.buy_num / this.mostBy <= 1) {\r\n          return (this.ruleForm.buy_num / this.mostBy).toFixed(3)\r\n        } else {\r\n          return 0\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      tradeInfo: function() {\r\n        this.ruleForm.buy_price = this.tradeInfo.last_buy_price\r\n      }\r\n    },\r\n    created() {\r\n      this.initUserInfo()\r\n      this.ruleForm.buy_price = this.tradeInfo.last_buy_price\r\n      this.trade_currency_name = this.$store.state.trade_currency_name\r\n      if (this.isLogin) {\r\n        this.isDisable = false\r\n      } else {\r\n        this.isDisable = true\r\n      }\r\n    },\r\n    methods: {\r\n      closeDialog(str) {\r\n        this[str] = false\r\n      },\r\n      initUserInfo() {\r\n        if (window.localStorage.getItem('link_userInfo')) {\r\n          userInfo().then(res => {\r\n            if (res.status !== 1000) {\r\n              return false\r\n            }\r\n            this.userInfo = res.data\r\n            if (parseFloat(this.userInfo.is_set_double_certification) === 0) {\r\n              this.ruleForm.pass_double = '0'\r\n            }\r\n          }).catch(() => {\r\n          })\r\n        }\r\n      },\r\n      submitForm(formName) {\r\n        if (this.userInfo.status !== 1) {\r\n          this.$message.error(this.$t('translateLang.tradeDetail.text71'))\r\n          return false\r\n        }\r\n        if ((this.userInfo.is_pwdtrade_exists).toString() !== '1') {\r\n          this.$message.error(this.$t('translateLang.tradeDetail.text72'))\r\n          return false\r\n        }\r\n  \r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.dialogVisible = true\r\n          } else {\r\n            this.changeByPrice()\r\n            if (!(parseFloat(this.ruleForm.buy_price) < this.tradeInfo.last_buy_price * 1.1)) {\r\n              this.isToCnyHidden = true\r\n            }\r\n            console.log('error submit!!')\r\n            return false\r\n          }\r\n        })\r\n      },\r\n      submitData(trade_password) {\r\n        const data = { ...this.ruleForm }\r\n        data.currency_id = this.tradeInfo.currency_id\r\n        data.trade_area_id = this.tradeInfo.trade_area_id\r\n        data.trade_password = md5(trade_password)\r\n        data.price_type = this.isSurePrice ? 1 : 2\r\n  \r\n        this.dialogVisible = false\r\n        tradeBuyOption(data).then(res => {\r\n          if (res.status !== 1000) {\r\n            this.$message.error(res.msg)\r\n            return false\r\n          }\r\n\r\n          this.resetForm('ruleForm')\r\n          this.$emit('refresh')\r\n          this.$message.success(this.$t('tradeDetail.buy.part18'))\r\n        }).catch(() => {\r\n        })\r\n      },\r\n      changeByPrice() {\r\n        if (!this.ruleForm.buy_price) {\r\n          this.slideData = 0\r\n          this.ruleForm.buy_num = ''\r\n        }\r\n        if (/.{1}/.test(this.ruleForm.buy_price)) {\r\n          this.isToCnyHidden = false\r\n          if (!(/^[0-9]*.[0-9]{0,6}$/).test(this.ruleForm.buy_price)) {\r\n            // this.ruleForm.buy_price = this.ruleForm.buy_price.match(/^[0-9]*.[0-9]{0,5}/)\r\n            this.ruleForm.buy_price = this.ruleForm.buy_price.match(/^[0-9]*.[0-9]{0,5}/)[0]\r\n          }\r\n        } else {\r\n          this.isToCnyHidden = true\r\n        }\r\n  \r\n        if (!parseFloat(this.ruleForm.buy_price)) {\r\n          this.isToCnyHidden = true\r\n          return false\r\n        }\r\n  \r\n        if (!(/^[0-9]([0-9]|\\.)*$/.test(this.ruleForm.buy_price))) {\r\n          this.isToCnyHidden = true\r\n          return false\r\n        }\r\n        if (this.ruleForm.buy_price > parseFloat(this.tradeInfo.currency_buy_balance)) {\r\n          this.isToCnyHidden = true\r\n          return false\r\n        }\r\n  \r\n        // this.ruleForm.currency_amount = (this.ruleForm.legal_money_amount / this.detailData.quote_price).toFixed(5)\r\n      },\r\n      changeByRange() {\r\n        if (!this.ruleForm.buy_price) {\r\n          this.slideData = 0\r\n          return false\r\n        }\r\n        console.log(this.ruleForm.buy_price)\r\n        const num = parseFloat(this.tradeInfo.currency_buy_balance) / parseFloat(this.ruleForm.buy_price)\r\n        let buy_num = num * this.slideData / 100\r\n        if (!isFinite(num)) {\r\n          buy_num = 0\r\n        }\r\n        if (buy_num) { this.ruleForm.buy_num = Math.floor(buy_num * 100000) / 100000 } else {\r\n          this.ruleForm.buy_num = 0\r\n        }\r\n      },\r\n      changeByNum() {\r\n        if (/.{1}/.test(this.ruleForm.buy_num)) {\r\n          if (!(/^[0-9]*.[0-9]{0,2}$/).test(this.ruleForm.buy_num)) {\r\n            // this.ruleForm.buy_price = this.ruleForm.buy_price.match(/^[0-9]*.[0-9]{0,5}/)\r\n            this.ruleForm.buy_num = this.ruleForm.buy_num.match(/^[0-9]*.[0-9]{0,1}/)[0]\r\n          }\r\n        }\r\n        if (this.percent <= 1) {\r\n          this.slideData = parseFloat(this.percent) * 100\r\n        } else {\r\n          this.slideData = 0\r\n        }\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped lang=\"less\">\r\n  .buy-form {\r\n    font-size: 12px;\r\n    padding: 0 13px;\r\n    color: #61626a;\r\n    position: relative;\r\n    h3{\r\n      font-size: 14px;\r\n      margin: 7px 0;\r\n      font-weight: normal;\r\n    }\r\n    .title-second{\r\n      line-height: 28px;\r\n      margin-bottom: 5px;\r\n    }\r\n    .to-cny {\r\n      position: absolute;\r\n      color: #fff;\r\n      font-size: 12px;\r\n      line-height: 30px;\r\n      height: 30px;\r\n      color: #61688a;\r\n      top: 40px;\r\n      padding-left: 15px;\r\n    }\r\n    .slider{\r\n      width: 100%;\r\n      display: inline-block;\r\n    }\r\n    .best{\r\n      position: absolute;\r\n      right: 5px;\r\n      top: 0;\r\n      z-index: 99;\r\n      font-size: 12px;\r\n      color: #fff;\r\n    }\r\n    .toComputed{\r\n      margin: 10px 0 16px;\r\n    }\r\n    \r\n  }\r\n</style>\r\n<style lang=\"less\">\r\n.buy-form{\r\n  input::-webkit-input-placeholder{\r\n        color:#61636f !important;\r\n    }\r\n    input::-moz-placeholder{   /* Mozilla Firefox 19+ */\r\n        color:#61636f !important;\r\n    }\r\n    input:-moz-placeholder{    /* Mozilla Firefox 4 to 18 */\r\n        color:#61636f !important;\r\n    }\r\n    input:-ms-input-placeholder{  /* Internet Explorer 10-11 */ \r\n        color:#61636f !important;\r\n    }\r\n    .el-input .el-input__inner{\r\n      background-color: #191b2b;\r\n      border-color: #303c56;\r\n      color: #fff;\r\n      font-size: 12px;\r\n    }\r\n    .c-white{\r\n      color: white;\r\n    }\r\n    .c-gray{\r\n      color: #61626a;\r\n    }\r\n    .to-cny-container{\r\n      position: relative;\r\n      margin-bottom: 30px;\r\n    }\r\n    .el-slider__runway{\r\n      margin: 7px 0 20px 0;\r\n      height: 4px !important;\r\n      background-color: #343645 !important;\r\n    }\r\n    .buy-btn1,\r\n    .buy-btn1.is-disabled\r\n    .buy-btn1.focus, .buy-btn1:focus, .buy-btn1:hover{\r\n      width: 100% !important;\r\n      background: #37c769 !important;\r\n      border: 1px solid #37c769 !important;\r\n      color: white !important;\r\n      // margin-bottom: 15px;\r\n    }\r\n  // 新增\r\n  .el-form-item__label{\r\n    width: 60px;\r\n    text-align: left;\r\n    font-size: 12px;\r\n  }\r\n  .el-input{\r\n    width: calc(100% - 60px);\r\n  }\r\n   .to-cny{\r\n    left: 60px;\r\n    width: calc(100% - 75px);\r\n  }\r\n   .el-slider__runway.disabled .el-slider__button{\r\n    left: 13px;\r\n  }\r\n  .el-form-item__error{\r\n    left: 60px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/tradeDetail/components/buyForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"buy-form\"},[_c('div',{staticClass:\"title-second\"},[_vm._v(_vm._s(_vm.$t('tradeDetail.buy.part2'))+\" \"+_vm._s(_vm.tradeInfo.trade_currency_mark)+\"： \"),_c('span',{staticClass:\"c-green\"},[_vm._v(_vm._s(_vm.tradeInfo.currency_buy_balance))])]),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules}},[(_vm.isSurePrice == 0)?_c('el-form-item',{staticClass:\"to-cny-container\",attrs:{\"prop\":\"buy_price\",\"label\":_vm.$t('translateLang.tradeDetail.text1')}},[_c('el-input',{attrs:{\"placeholder\":_vm.$t('tradeDetail.buy.part4'),\"disabled\":_vm.isDisable},on:{\"input\":function($event){_vm.changeByPrice()}},model:{value:(_vm.ruleForm.buy_price),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"buy_price\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.buy_price\"}}),_vm._v(\" \"),(_vm.$i18n.locale == 'zn')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ \"+_vm._s(_vm.toCny)+\" CNY\")]):_vm._e(),_vm._v(\" \"),(_vm.$i18n.locale == 'zh-hk')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ HK$ \"+_vm._s(_vm.toHkb)+\" \")]):_vm._e(),_vm._v(\" \"),(_vm.$i18n.locale == 'en')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ $ \"+_vm._s(_vm.toUsb))]):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.isSurePrice == 1)?_c('el-form-item',{staticClass:\"to-cny-container\",attrs:{\"prop\":\"buy_price\",\"label\":_vm.$t('translateLang.tradeDetail.text1')}},[_c('el-input',{attrs:{\"disabled\":\"\"},on:{\"input\":function($event){_vm.changeByPrice()}},model:{value:(_vm.tips),callback:function ($$v) {_vm.tips=$$v},expression:\"tips\"}}),_vm._v(\" \"),(_vm.$i18n.locale == 'zn')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ \"+_vm._s(_vm.toCny)+\" CNY\")]):_vm._e(),_vm._v(\" \"),(_vm.$i18n.locale == 'zh-hk')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ HK$ \"+_vm._s(_vm.toHkb))]):_vm._e(),_vm._v(\" \"),(_vm.$i18n.locale == 'en')?_c('span',{staticClass:\"to-cny\",class:{ 'hidden': _vm.isToCnyHidden }},[_vm._v(\" ≈ $ \"+_vm._s(_vm.toUsb))]):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"buy_num\",\"label\":_vm.$t('translateLang.tradeDetail.text2')}},[_c('el-input',{attrs:{\"type\":\"number\",\"placeholder\":_vm.$t('tradeDetail.buy.part6'),\"disabled\":_vm.isDisable},model:{value:(_vm.ruleForm.buy_num),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"buy_num\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.buy_num\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"clearfix\"},[_c('el-slider',{staticClass:\"pull-left slider\",on:{\"input\":function($event){if($event.target !== $event.currentTarget){ return null; }_vm.changeByRange()}},model:{value:(_vm.slideData),callback:function ($$v) {_vm.slideData=$$v},expression:\"slideData\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"toComputed\"},[_c('span',{staticStyle:{\"width\":\"60px\",\"display\":\"inline-block\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('translateLang.tradeDetail.text3'))+\"\\n      \")]),_vm._v(\"\\n        \"+_vm._s(_vm.convert)+_vm._s(_vm.tradeInfo.trade_currency_mark)+\" \\n      \"),_c('span',{staticClass:\"c-gray\"},[_vm._v(\"(\"+_vm._s(_vm.$t('tradeDetail.buy.part9'))+_vm._s(_vm.tradeInfo.currency_buy_fee)+\"%)\")])]),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticClass:\"buy-btn1\",attrs:{\"disabled\":_vm.isDisable},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}},[_vm._v(_vm._s(_vm.$t('tradeDetail.buy.part10')))])],1)],1),_vm._v(\" \"),_c('password-dialog',{attrs:{\"dialogVisible\":_vm.dialogVisible},on:{\"submitData\":_vm.submitData,\"closeDialog\":_vm.closeDialog}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23d75b5b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/tradeDetail/components/buyForm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23d75b5b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./buyForm.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23d75b5b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./buyForm.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./buyForm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./buyForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23d75b5b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./buyForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-23d75b5b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/tradeDetail/components/buyForm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}