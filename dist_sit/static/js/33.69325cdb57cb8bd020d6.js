webpackJsonp([33],{OiEd:function(e,t){},XQ82:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("mvHQ"),o=r.n(s),i=r("Dd8w"),a=r.n(i),n=r("Gu7T"),l=r.n(n),c=r("TIfe"),u=r("E4LH"),m=r("UK/b"),d=r("NC6I"),p=r.n(d),_={data:function(){var e=this,t=function(t,r,s){""===r?s(new Error(e.$t("errorTips.withoutPwd"))):r.length<6?s(new Error(e.$t("errorTips.longPwd"))):r.length>20?s(new Error(e.$t("errorTips.longLimitPwd"))):Object(u.d)(r)?s():s(new Error(e.$t("errorTips.rulePwd")))},r=function(t,r,s){var o=void 0;o=e.tab.phone?e.ruleForm.user_password:e.ruleForm1.user_password,""===r?s(new Error(e.$t("errorTips.surePwd"))):r!==o?s(new Error(e.$t("errorTips.surePwdError"))):s()};return{tab:{phone:!0,email:!1},smsCodeList:[],searchContent:"",ruleForm:{code_area:"",user_account:"",user_password:"",sms_verify:"",user_confirmpwd:"",invite_code:"",proto:[]},ruleForm1:{user_account:"",user_password:"",sms_verify:"",user_confirmpwd:"",invite_code:"",proto1:[]},rules:{user_account:[{validator:function(t,r,s){""===r?s(new Error(e.$t("errorTips.withoutPhone"))):Object(u.e)(r)?s():s(new Error(e.$t("errorTips.phoneFormat")))},trigger:"blur"}],user_password:[{validator:t,trigger:"blur"}],sms_verify:[{required:!0,message:this.$t("errorTips.withoutVerifyCode"),trigger:"blur"}],user_confirmpwd:[{validator:r,trigger:"blur"},{required:!0,message:this.$t("errorTips.withoutSurePwd"),trigger:"blur"}],proto:[{type:"array",required:!0,message:this.$t("errorTips.withoutProto"),trigger:"change"}]},rules1:{user_account:[{validator:function(t,r,s){""===r?s(new Error(e.$t("errorTips.withoutEmail"))):Object(u.a)(r)?s():s(new Error(e.$t("errorTips.emailFormat")))},trigger:"blur"}],user_password:[{validator:t,trigger:"blur"}],sms_verify:[{required:!0,message:this.$t("errorTips.withoutVerifyCode"),trigger:"blur"}],user_confirmpwd:[{validator:r,trigger:"blur"},{required:!0,message:this.$t("errorTips.withoutSurePwd"),trigger:"blur"}],proto1:[{type:"array",required:!0,message:this.$t("errorTips.withoutProto"),trigger:"change"}]},validCode:!0,validState:!0,validTip:this.$t("verifyCode.title"),validCode1:!0,validState1:!0,validTip1:this.$t("verifyCode.title")}},mounted:function(){document.body.className="bgWhite",this.handleGetInternationalSmsCode(),this.$route.query.invite_code&&(this.ruleForm.invite_code=this.$route.query.invite_code,this.ruleForm1.invite_code=this.$route.query.invite_code)},beforeRouteLeave:function(e,t,r){document.body.className="",r()},methods:{searchInputChange:function(){var e=this;if(""===this.searchContent)return this.smsCodeList=this.smsCodeListCopy,!1;var t=[];this.smsCodeList.forEach(function(r){new RegExp(e.searchContent).test(r.nation_cn)&&t.push(r)}),0!==t.length?this.smsCodeList=[].concat(t):this.smsCodeList=this.smsCodeListCopy},handleGetInternationalSmsCode:function(){var e=this;Object(m.a)().then(function(t){if(1e3!==t.status)return e.$message.error(t.msg),!1;e.smsCodeList=[].concat(l()(t.data)),e.smsCodeList.unshift(t.data[t.data.length-1]),e.smsCodeList.pop(),e.smsCodeListCopy=[].concat(l()(e.smsCodeList)),e.ruleForm.code_area="+"+e.smsCodeList[0].code_area}).catch(function(){})},submitForm:function(e){var t=this;setTimeout(function(){},1),this.$refs[e].validate(function(r){if(!r)return!1;var s=a()({},t[e]);t[e].code_area&&(s.code_area=t[e].code_area.substring(1)),s.user_password=p()(t[e].user_password),s.user_confirmpwd=p()(t[e].user_password);var o=t;Object(m.e)(s).then(function(t){if(1e3!==t.status)return o.$message.error(t.msg),!1;o.handleLogin(e)}).catch(function(){})})},formatName:function(e){return!e||e.length<=4?e:e.substr(0,3)+"***"+e.substr(-4,4)},handleLogin:function(e){var t=this,r={};r.user_account=this[e].user_account,r.user_password=p()(this[e].user_password),Object(m.b)(r).then(function(e){if(1e3!==e.status)t.$message.error(e.msg);else{Object(c.c)(e.data.token);var r=o()({uid:e.data.id,token:e.data.token,user_account:e.data.nickname,nickname:e.data.nickname,head:e.data.head,email:e.data.email,phone:e.data.phone});window.localStorage.setItem("link_userInfo",r);var s=JSON.parse(r);t.$store.commit("SET_USER_AVATAR",s.head),s.nickname&&t.$store.commit("SET_USER_NICKNAME",s.nickname),s.phone&&t.$store.commit("SET_USER_PHONE",t.formatName(s.phone)),s.email&&t.$store.commit("SET_USER_EMAIL",t.formatName(s.email)),t.$router.push("/registerSuccess")}}).catch(function(){})},handlePhoneState:function(){return this.ruleForm.user_account?!!Object(u.e)(this.ruleForm.user_account)||(this.$message.error(this.$t("errorTips.phoneFormat")),!1):(this.$message.error(this.$t("errorTips.withoutPhone")),!1)},handleEmailState:function(){return this.ruleForm1.user_account?!!Object(u.a)(this.ruleForm1.user_account)||(this.$message.error(this.$t("errorTips.emailFormat")),!1):(this.$message.error(this.$t("errorTips.withoutEmail")),!1)},sendRequestSms:function(e){var t=this,r=!1,s={},o="";this.tab.phone?(o="phone",r=this.handlePhoneState(),s.user_account=this.ruleForm.user_account,s.code_area=this.ruleForm.code_area.substring(1)):(o="email",r=this.handleEmailState(),s.user_account=this.ruleForm1.user_account),s.request_type="register",r&&Object(m.d)(s).then(function(e){if(1e3!==e.status)return t.$message.error(e.msg),!1;t.setTime(o)}).catch(function(){})},setTime:function(e){var t=this;if("phone"===e){var r=60;if(this.validCode){this.validCode=!1;var s=setInterval(function(){r--,t.validTip=r+t.$t("verifyCode.second"),0===r&&(clearInterval(s),t.validTip=t.$t("verifyCode.getAgain"),t.validCode=!0,t.validState=!0)},1e3);return s}}else{var o=60;if(this.validCode1){this.validCode1=!1;var i=this,a=setInterval(function(){o--,i.validTip1=o+i.$t("verifyCode.second"),0===o&&(clearInterval(a),i.validTip1=i.$t("verifyCode.getAgain"),i.validCode1=!0,i.validState1=!0)},1e3);return a}}}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register"},[r("header",[r("div",{staticClass:"navigation container clearfix"},[r("div",{staticClass:"pull-left"},[r("router-link",{staticClass:"logo",attrs:{to:"/"}},[r("img",{attrs:{src:"static/images/index/logo_02.png",alt:""}})]),e._v(" "),r("span",[e._v(e._s(e.$t("register.nav.title")))])],1),e._v(" "),r("div",{staticClass:"menu2 pull-right"},[e._v("\n          "+e._s(e.$t("register.des.part1"))),r("router-link",{staticClass:"menu2-login",attrs:{to:"/login"}},[e._v(e._s(e.$t("register.des.part2")))]),r("span",{staticClass:"icon-back"}),e._v(" "),r("router-link",{staticClass:"back-index",attrs:{to:"/"}},[e._v(e._s(e.$t("register.des.part3")))])],1)])]),e._v(" "),r("div",{staticClass:"form"},[r("div",{staticClass:"title"},[r("span",{class:{"c-violet":e.tab.phone},on:{click:function(t){e.tab.phone=!0,e.tab.email=!1}}},[e._v(e._s(e.$t("register.regWays.byPhone")))]),r("span",{class:{"c-violet":e.tab.email},on:{click:function(t){e.tab.phone=!1,e.tab.email=!0}}},[e._v(e._s(e.$t("register.regWays.buEmail")))])]),e._v(" "),r("el-form",{directives:[{name:"show",rawName:"v-show",value:e.tab.phone,expression:"tab.phone"}],key:"1",ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":!0,rules:e.rules,"label-width":"0"}},[r("el-form-item",{staticClass:"phone-account",attrs:{prop:"user_account"}},[r("el-select",{staticClass:"phone-code-area",attrs:{"popper-class":"option-list"},model:{value:e.ruleForm.code_area,callback:function(t){e.$set(e.ruleForm,"code_area",t)},expression:"ruleForm.code_area"}},[r("el-input",{staticClass:"search-content",attrs:{"prefix-icon":"el-icon-search"},on:{input:e.searchInputChange},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}}),e._v(" "),e._l(e.smsCodeList,function(t){return r("el-option",{key:t.code_id,attrs:{value:"+"+t.code_area}},[r("div",{staticClass:"clearfix code-area"},[r("div",{staticClass:"pull-left area"},[e._v(e._s(t.nation_cn))]),r("div",{staticClass:"pull-right"},[e._v("+"+e._s(t.code_area))])])])})],2),e._v(" "),r("el-input",{staticClass:"phone-num",attrs:{placeholder:e.$t("register.placeholder.tel")},model:{value:e.ruleForm.user_account,callback:function(t){e.$set(e.ruleForm,"user_account","string"==typeof t?t.trim():t)},expression:"ruleForm.user_account"}}),e._v(" "),r("p",{staticClass:"tips clearfix"},[r("img",{attrs:{src:"static/images/login_register/tips.jpg"}}),e._v(e._s(e.$t("register.tips.phone")))])],1),e._v(" "),r("el-form-item",{staticClass:"verify",attrs:{prop:"sms_verify"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:e.$t("register.placeholder.verifyCode")},model:{value:e.ruleForm.sms_verify,callback:function(t){e.$set(e.ruleForm,"sms_verify","string"==typeof t?t.trim():t)},expression:"ruleForm.sms_verify"}}),r("el-button",{staticClass:"get-verify",attrs:{disabled:!e.validCode},on:{click:function(t){e.sendRequestSms(t)}}},[e._v(e._s(e.validTip))])],1),e._v(" "),r("el-form-item",{attrs:{prop:"user_password"}},[r("el-input",{attrs:{type:"password",placeholder:e.$t("register.placeholder.pwd")},model:{value:e.ruleForm.user_password,callback:function(t){e.$set(e.ruleForm,"user_password","string"==typeof t?t.trim():t)},expression:"ruleForm.user_password"}}),e._v(" "),r("p",{staticClass:"tips clearfix"},[r("img",{attrs:{src:"static/images/login_register/tips.jpg"}}),e._v(e._s(e.$t("register.tips.pwd")))])],1),e._v(" "),r("el-form-item",{attrs:{prop:"user_confirmpwd"}},[r("el-input",{attrs:{type:"password",placeholder:e.$t("register.placeholder.confirmPwd")},model:{value:e.ruleForm.user_confirmpwd,callback:function(t){e.$set(e.ruleForm,"user_confirmpwd","string"==typeof t?t.trim():t)},expression:"ruleForm.user_confirmpwd"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"invite_code"}},[r("el-input",{attrs:{placeholder:e.$t("register.placeholder.inviteCode")},model:{value:e.ruleForm.invite_code,callback:function(t){e.$set(e.ruleForm,"invite_code","string"==typeof t?t.trim():t)},expression:"ruleForm.invite_code"}})],1),e._v(" "),r("el-form-item",{staticClass:"proto",attrs:{prop:"proto"}},[r("el-checkbox-group",{model:{value:e.ruleForm.proto,callback:function(t){e.$set(e.ruleForm,"proto",t)},expression:"ruleForm.proto"}},[r("el-checkbox",{attrs:{label:"",name:"type"}},[e._v(e._s(e.$t("register.proto.part1"))),r("router-link",{attrs:{to:"/proto"}},[e._v(e._s(e.$t("register.proto.part2")))])],1)],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.$t("register.title"))},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("注册")])],1)],1),e._v(" "),r("el-form",{directives:[{name:"show",rawName:"v-show",value:e.tab.email,expression:"tab.email"}],key:"2",ref:"ruleForm1",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm1,"status-icon":!0,rules:e.rules1,"label-width":"0"}},[r("el-form-item",{attrs:{prop:"user_account"}},[r("el-input",{attrs:{placeholder:e.$t("register.placeholder.email")},model:{value:e.ruleForm1.user_account,callback:function(t){e.$set(e.ruleForm1,"user_account","string"==typeof t?t.trim():t)},expression:"ruleForm1.user_account"}}),e._v(" "),r("p",{staticClass:"tips clearfix"},[r("img",{attrs:{src:"static/images/login_register/tips.jpg"}}),e._v(e._s(e.$t("register.tips.email")))])],1),e._v(" "),r("el-form-item",{staticClass:"verify",attrs:{prop:"sms_verify"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:e.$t("register.placeholder.verifyCode")},model:{value:e.ruleForm1.sms_verify,callback:function(t){e.$set(e.ruleForm1,"sms_verify","string"==typeof t?t.trim():t)},expression:"ruleForm1.sms_verify"}}),r("el-button",{staticClass:"get-verify",attrs:{disabled:!e.validCode1},on:{click:function(t){e.sendRequestSms(t)}}},[e._v(e._s(e.validTip1))])],1),e._v(" "),r("el-form-item",{attrs:{prop:"user_password"}},[r("el-input",{attrs:{type:"password",placeholder:e.$t("register.placeholder.pwd")},model:{value:e.ruleForm1.user_password,callback:function(t){e.$set(e.ruleForm1,"user_password","string"==typeof t?t.trim():t)},expression:"ruleForm1.user_password"}}),e._v(" "),r("p",{staticClass:"tips clearfix"},[r("img",{attrs:{src:"static/images/login_register/tips.jpg"}}),e._v(e._s(e.$t("register.tips.pwd")))])],1),e._v(" "),r("el-form-item",{attrs:{prop:"user_confirmpwd"}},[r("el-input",{attrs:{type:"password",placeholder:e.$t("register.placeholder.confirmPwd")},model:{value:e.ruleForm1.user_confirmpwd,callback:function(t){e.$set(e.ruleForm1,"user_confirmpwd","string"==typeof t?t.trim():t)},expression:"ruleForm1.user_confirmpwd"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"invite_code"}},[r("el-input",{attrs:{placeholder:e.$t("register.placeholder.inviteCode")},model:{value:e.ruleForm1.invite_code,callback:function(t){e.$set(e.ruleForm1,"invite_code","string"==typeof t?t.trim():t)},expression:"ruleForm1.invite_code"}})],1),e._v(" "),r("el-form-item",{staticClass:"proto",attrs:{prop:"proto1"}},[r("el-checkbox-group",{model:{value:e.ruleForm1.proto1,callback:function(t){e.$set(e.ruleForm1,"proto1",t)},expression:"ruleForm1.proto1"}},[r("el-checkbox",{attrs:{label:"",name:"type"}},[e._v(e._s(e.$t("register.proto.part1"))),r("router-link",{attrs:{to:"/proto"}},[e._v(e._s(e.$t("register.proto.part2")))])],1)],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.$t("register.title"))},on:{click:function(t){e.submitForm("ruleForm1")}}},[e._v("注册")])],1)],1)],1),e._v(" "),r("footer",[r("div",{},[e._v("\n        "+e._s(e.$t("register.footer"))+"\n      ")])])])},staticRenderFns:[]};var h=r("VU/8")(_,v,!1,function(e){r("OiEd"),r("zorX")},"data-v-141ad2ba",null);t.default=h.exports},zorX:function(e,t){}});
//# sourceMappingURL=33.69325cdb57cb8bd020d6.js.map