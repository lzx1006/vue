webpackJsonp([66],{VvUA:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("mvHQ"),s=r.n(o),i=r("TIfe"),n=r("E4LH"),a=r("UK/b"),l=r("NC6I"),c=r.n(l),u={data:function(){var t=this;return{historyUrl:"",loginForm:{userName:"",password:""},loginFormRules:{userName:[{validator:function(e,r,o){""===r?o(new Error(t.$t("errorTips.withoutAccount"))):(Object(n.e)(r)||Object(n.a)(r)?o():o(new Error(t.$t("errorTips.notSuitRuleAccount"))),o())},trigger:"blur"}],password:[{validator:function(e,r,o){""===r?o(new Error(t.$t("errorTips.withoutPwd"))):(Object(n.d)(r)||o(new Error(t.$t("errorTips.notSuitRulePwd"))),o())},trigger:"blur"}]}}},mounted:function(){document.body.className="bgWhite"},directives:{focus:{inserted:function(t){t.focus()}}},beforeRouteLeave:function(t,e,r){document.body.className="",r()},beforeRouteEnter:function(t,e,r){r(function(t){t.historyUrl=e.fullPath})},methods:{formatName:function(t){return!t||t.length<=4?t:t.substr(0,3)+"***"+t.substr(-4,4)},returnBack:function(){var t=this.historyUrl;this.historyUrl=t.split("&token")[0],this.historyUrl.includes("register")||this.historyUrl.includes("login")?this.$router.push({path:"/"}):this.historyUrl?this.$router.push(this.historyUrl):this.$router.push({path:"/"})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var r={};r.user_account=e.loginForm.userName,r.user_password=c()(e.loginForm.password),Object(a.b)(r).then(function(t){if(1e3!==t.status)e.$message.error(t.msg);else{Object(i.c)(t.data.token);var r=s()({uid:t.data.id,token:t.data.token,user_account:t.data.nickname,nickname:t.data.nickname,head:t.data.head,email:t.data.email,phone:t.data.phone});window.localStorage.setItem("link_userInfo",r);var o=JSON.parse(r);e.$store.commit("SET_LOGIN",!0),e.$store.commit("SET_USER_AVATAR",o.head),o.nickname&&e.$store.commit("SET_USER_NICKNAME",o.nickname),o.phone&&e.$store.commit("SET_USER_PHONE",e.formatName(o.phone)),o.email&&e.$store.commit("SET_USER_EMAIL",e.formatName(o.email)),e.returnBack()}}).catch(function(){})})}}},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("header",[r("div",{staticClass:"navigation container clearfix"},[t._m(0),t._v(" "),r("div",{staticClass:"menu2 pull-right"},[r("span",{staticClass:"icon-back"}),t._v(" "),r("a",{attrs:{href:""}},[t._v(t._s(t.$t("login.nav.back")))])])])]),t._v(" "),r("div",{staticClass:"login-content wrapper"},[r("div",{staticClass:"container clearfix"},[r("div",{staticClass:"pull-left login-content-des"},[r("p",[t._v(t._s(t.$t("login.des1.part1")))]),t._v(" "),r("p",[r("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("login.des1.part3")))]),t._v(t._s(t.$t("login.des1.part4")))],1)]),t._v(" "),r("div",{staticClass:"pull-right login-content-form"},[r("h3",{domProps:{textContent:t._s(t.$t("login.title"))}}),t._v(" "),r("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:t.loginForm,"status-icon":"",rules:t.loginFormRules,"label-width":"0"}},[r("el-form-item",{attrs:{prop:"userName"}},[r("i",{staticClass:"icon-account inside"}),t._v(" "),r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:t.$t("login.usernamePlaceholder")},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName","string"==typeof e?e.trim():e)},expression:"loginForm.userName"}})],1),t._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("i",{staticClass:"icon-password inside"}),t._v(" "),r("el-input",{attrs:{type:"password",placeholder:t.$t("login.passwordPlaceholder")},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.submitForm("loginForm")}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password","string"==typeof e?e.trim():e)},expression:"loginForm.password"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},domProps:{textContent:t._s(t.$t("login.toLogin"))},nativeOn:{click:function(e){e.preventDefault(),t.submitForm("loginForm")}}},[t._v(t._s(t.$t("login.toLogin")))])],1)],1),t._v(" "),r("div",{staticClass:"form-group no-account clearfix"},[r("p",{staticClass:"pull-left"},[t._v(t._s(t.$t("login.des2.part1"))),r("router-link",{staticClass:"register",attrs:{to:"/register"}},[t._v(t._s(t.$t("login.des2.part2")))])],1),t._v(" "),r("router-link",{staticClass:"forgot-password pull-right",attrs:{to:"/forgetPassword"}},[t._v(t._s(t.$t("login.des2.part3")))])],1)],1)])]),t._v(" "),r("footer",{domProps:{textContent:t._s(t.$t("login.footer.copyright"))}})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"logo pull-left",attrs:{href:""}},[e("img",{attrs:{src:"static/images/index/logo_02.png",alt:""}})])}]};var d=r("VU/8")(u,m,!1,function(t){r("lAIf")},"data-v-309b10bf",null);e.default=d.exports},lAIf:function(t,e){}});
//# sourceMappingURL=66.708615b90757ab93dd28.js.map