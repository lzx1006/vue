webpackJsonp([7],{"H/+s":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Dd8w"),s=o.n(r),i=o("UK/b"),a=o("vMJZ"),n=o("E4LH"),c={props:["dialogVisible"],components:{imgCode:o("JLiW").a},data:function(){var e=this;return{host:window.location.host,phoneForm:{sms_verify:"",user_account:"",code_area:"",captcha:"",require_type:1},smsCodeList:[],phoneFormRules:{sms_verify:[{required:!0,message:this.$t("errorTips.withoutVerifyCode"),trigger:"blur"}],captcha:[{required:!0,message:this.$t("errorTips.withoutVerifyCode"),trigger:"blur"}],user_account:[{required:!0,validator:function(t,o,r){""===o?r(new Error(e.$t("errorTips.withoutPhone"))):Object(n.c)(o)?r():r(new Error(e.$t("errorTips.phoneFormat")))},trigger:"blur"}]},validCode:!0,validTip:this.$t("verifyCode.title")}},computed:{},created:function(){this.handleGetInternationalSmsCode()},methods:{handleGetInternationalSmsCode:function(){var e=this;Object(i.a)().then(function(t){if(1e3!==t.status)return e.$message.error(t.msg),!1;e.smsCodeList=t.data,e.smsCodeList.unshift(t.data[t.data.length-1]),e.smsCodeList.pop(),e.phoneForm.code_area="+"+e.smsCodeList[0].code_area}).catch(function(){})},handleCloseDialog:function(){this.$emit("closeDialog","bindPhoneDialogVisible")},phoneSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=s()({},t.phoneForm);Object(a.r)(o).then(function(e){if(1e3!==e.status)return t.$message.error(e.msg),!1;t.$message.success(t.$t("errorTips.bindPhoneSuccess")),t.$emit("getUserInfo"),t.handleCloseDialog()}).catch(function(){})})},handleSendRequestSms:function(e){var t=this;if(!this.phoneForm.user_account)return this.$message.error(this.$t("errorTips.withoutPhone")),!1;if(!Object(n.c)(this.phoneForm.user_account))return this.$message.error(this.$t("errorTips.phoneFormat")),!1;var o={};this.setTime(),o.user_account=this.phoneForm.user_account,o.request_type="edit",o.code_area=this.phoneForm.code_area.substring(1),Object(i.d)(o).then(function(e){if(1e3!==e.status)return t.$message.error(e.msg),!1}).catch(function(){})},setTime:function(){var e=60;if(this.validCode){this.validCode=!1;var t=this,o=setInterval(function(){e--,t.validTip=e+t.$t("verifyCode.second"),0===e&&(clearInterval(o),t.validTip=t.$t("verifyCode.getAgain"),t.validCode=!0)},1e3);return o}}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{staticClass:"mdphone-dialog",attrs:{title:e.$t("user.bindPhoneDialog.title"),visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleCloseDialog,width:"580px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"phoneForm",attrs:{model:e.phoneForm,rules:e.phoneFormRules,"label-width":"180px"}},[o("el-form-item",{staticClass:"hidden",attrs:{label:e.$t("user.bindPhoneDialog.tradePwd"),prop:"pwdtrade"}},[o("el-input",{attrs:{type:"password",placeholder:e.$t("user.bindPhoneDialog.tradePwdPlaceholder")},model:{value:e.phoneForm.pwdtrade,callback:function(t){e.$set(e.phoneForm,"pwdtrade","string"==typeof t?t.trim():t)},expression:"phoneForm.pwdtrade"}})],1),e._v(" "),o("el-form-item",{staticClass:"phone-account",attrs:{prop:"user_account",label:e.$t("form.phone")}},[o("el-select",{staticClass:"phone-code-area",model:{value:e.phoneForm.code_area,callback:function(t){e.$set(e.phoneForm,"code_area",t)},expression:"phoneForm.code_area"}},e._l(e.smsCodeList,function(t){return o("el-option",{key:t.code_id,attrs:{value:"+"+t.code_area}},[o("div",{staticClass:"clearfix code-area"},[o("div",{staticClass:"pull-left area"},[e._v(e._s(t.nation_cn))]),o("div",{staticClass:"pull-right"},[e._v("+"+e._s(t.code_area))])])])})),e._v(" "),o("el-input",{staticClass:"phone-num",model:{value:e.phoneForm.user_account,callback:function(t){e.$set(e.phoneForm,"user_account","string"==typeof t?t.trim():t)},expression:"phoneForm.user_account"}})],1),e._v(" "),o("el-form-item",{staticClass:"img-code-container",attrs:{label:e.$t("translateLang.user.text1"),prop:"captcha",mes:""}},[o("el-input",{model:{value:e.phoneForm.captcha,callback:function(t){e.$set(e.phoneForm,"captcha","string"==typeof t?t.trim():t)},expression:"phoneForm.captcha"}}),e._v(" "),e.host.indexOf("hkcexp")>-1?o("img-code",{attrs:{url:"https://crypto.hkcexp.com/api/Login/captchaVerify"}}):o("img-code",{attrs:{url:"http://192.169.1.210:7569/api/Login/captchaVerify"}})],1),e._v(" "),o("el-form-item",{staticClass:"verify",attrs:{label:e.$t("user.bindPhoneDialog.code"),prop:"sms_verify"}},[o("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:e.$t("user.bindPhoneDialog.codePlaceholder")},model:{value:e.phoneForm.sms_verify,callback:function(t){e.$set(e.phoneForm,"sms_verify","string"==typeof t?t.trim():t)},expression:"phoneForm.sms_verify"}}),o("el-button",{staticClass:"get-verify",attrs:{disabled:!e.validCode},on:{click:function(t){e.handleSendRequestSms(t)}}},[e._v(e._s(e.validTip))])],1),e._v(" "),o("div",{staticClass:"btn-group appeal-btn"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.phoneSubmit("phoneForm")}}},[e._v(e._s(e.$t("dialog.sure")))])],1)],1)],1)},staticRenderFns:[]};var d=o("VU/8")(c,l,!1,function(e){o("m4gF"),o("JeTk"),o("NzMb")},"data-v-e0b26878",null);t.default=d.exports},JeTk:function(e,t){},NzMb:function(e,t){},m4gF:function(e,t){}});
//# sourceMappingURL=7.6c80961cc488b0ee3b5d.js.map